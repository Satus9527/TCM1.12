# âš¡ ç«‹å³é‡å¯æœåŠ¡

**é—®é¢˜**: `sequelize.define is not a function` 
**åŸå› **: æ¨¡å‹å¯¼å‡ºæ–¹å¼ä¸ä¸€è‡´  
**çŠ¶æ€**: âœ… å·²ä¿®å¤

---

## ğŸš€ ç«‹å³æ‰§è¡Œï¼ˆ2æ­¥ï¼‰

### 1ï¸âƒ£ åœæ­¢å½“å‰çš„åç«¯æœåŠ¡

åœ¨è¿è¡Œ `npm run dev` çš„ç»ˆç«¯ä¸­ï¼š
```
æŒ‰ Ctrl + C åœæ­¢æœåŠ¡
```

---

### 2ï¸âƒ£ é‡æ–°å¯åŠ¨åç«¯

```powershell
cd "D:\TCM web"
npm run dev
```

**ç­‰å¾…çœ‹åˆ°æˆåŠŸè¾“å‡º**ï¼š
```
âœ¨ Server started successfully!
ğŸŒ Server: http://localhost:3000
ğŸ’š Health: http://localhost:3000/api/health
ğŸ”Œ WebSocket: ws://localhost:3000/api/simulation
```

---

### 3ï¸âƒ£ è¿è¡Œæµ‹è¯•ï¼ˆæ–°ç»ˆç«¯ï¼‰

```powershell
cd "D:\TCM web"
node test-content-api.js
```

**é¢„æœŸç»“æœ**: 18ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ âœ…

---

## ğŸ”§ å·²ä¿®å¤çš„å†…å®¹

### ä¿®å¤çš„æ–‡ä»¶ï¼š
1. âœ… `src/models/UserCollection.js` - æ”¹ä¸ºå‡½æ•°å¯¼å‡º
2. âœ… `src/models/UserSimulation.js` - æ”¹ä¸ºå‡½æ•°å¯¼å‡º
3. âœ… `src/models/UserFile.js` - æ”¹ä¸ºå‡½æ•°å¯¼å‡º
4. âœ… `src/models/index.js` - é‡å†™ä¸ºæ ‡å‡†Sequelizeæ¨¡å‹åŠ è½½å™¨
5. âœ… `src/services/contentService.js` - ä¿®å¤æ¨¡å‹å¯¼å…¥æ–¹å¼

### ä¿®å¤åŸç†ï¼š

**ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰**:
```javascript
// UserCollection.js
const sequelize = require('../../config/database');
const UserCollection = sequelize.define(...); // âŒ sequelizeä¸æ˜¯å®ä¾‹
```

**ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰**:
```javascript
// UserCollection.js
module.exports = (sequelize, DataTypes) => {  // âœ… å‡½æ•°å¯¼å‡º
  const UserCollection = sequelize.define(...);
  return UserCollection;
};

// index.js 
const sequelize = new Sequelize(...);  // âœ… åˆ›å»ºå®ä¾‹
const model = require('./UserCollection')(sequelize, DataTypes);  // âœ… è°ƒç”¨å‡½æ•°
```

---

## ğŸ“‹ éªŒè¯æ¸…å•

å¯åŠ¨åç¡®è®¤ï¼š
- [ ] åç«¯æœåŠ¡æ­£å¸¸å¯åŠ¨ï¼ˆæ— çº¢è‰²é”™è¯¯ï¼‰
- [ ] çœ‹åˆ° "Server started successfully"
- [ ] çœ‹åˆ° "Database connection has been established successfully"
- [ ] æµ‹è¯•è„šæœ¬18ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡

---

**ç«‹å³æ‰§è¡Œç¬¬1æ­¥å’Œç¬¬2æ­¥ï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœï¼** ğŸš€

