# 中医药知识库数据说明

## 📚 知识库概览

项目包含以下中医药专业知识库文件，用于AI智能推荐和诊断分析：

| 文件名 | 数据类型 | 数量 | 用途 |
|--------|---------|------|------|
| `四相.json` | 配伍关系 | 20条 | AI方剂组成分析、配伍合理性检查 |
| `18反19畏.json` | 配伍禁忌 | 37条 | 配伍安全性检查、禁忌提醒 |
| `中药的功效和性味.json` | 药材详解 | 282条 | 药材功效查询、性味归经分析 |
| `药方数据集.json` | 经典方剂 | 246个 | AI方剂推荐、相似方剂匹配 |
| `herbs.json` | 药材基础 | - | 药材基础信息 |

---

## 📖 数据结构详解

### 1. 四相.json - 配伍关系数据

**数据类型**: 相须、相使、相畏、相杀

**示例数据**:
```json
{
  "id": "xuxu_01",
  "type": "相须",
  "herb_a": "麻黄",
  "herb_b": "桂枝",
  "description": "麻黄与桂枝相须为用，发汗解表之力增强",
  "effect": "增强发汗解表功效",
  "example_prescription": "麻黄汤",
  "mechanism": "两者均为辛温解表药，配伍后协同增强发汗作用"
}
```

**用途**:
- ✅ AI分析方剂组成的合理性
- ✅ 推荐增强药效的配伍方案
- ✅ 解释药物配伍的科学机制

**统计**:
- 相须关系: 5条
- 相使关系: 5条
- 相畏关系: 5条
- 相杀关系: 5条

---

### 2. 18反19畏.json - 配伍禁忌数据

**数据类型**: 十八反、十九畏

**示例数据**:
```json
{
  "id": "fan_01",
  "type": "十八反",
  "group": "甘草反",
  "herb_a": "甘草",
  "herb_b": "甘遂",
  "description": "甘草与甘遂属于配伍禁忌，不宜同用。"
}
```

**用途**:
- 🚫 配伍禁忌检查
- ⚠️ 方剂安全性警告
- 📋 处方审核功能

**统计**:
- 十八反: 18条
- 十九畏: 19条

---

### 3. 中药的功效和性味.json - 药材详解

**数据类型**: Instruction-Input-Output 格式（适用于AI训练）

**示例数据**:
```json
{
  "instruction": "请解释以下中药的功效和性味：",
  "input": "药材：人参",
  "output": "人参：性微温，味甘、微苦。\n归脾、肺、心、肾经。\n功效：大补元气，复脉固脱，补脾益肺，生津养血，安神益智。\n用法用量：3-9g，挽救虚脱可用15-30g；研末吞服，每次1-2g。\n禁忌：实证、热证、正气不虚者不宜使用，且不宜与藜芦、五灵脂同用。"
}
```

**用途**:
- 📖 药材功效查询接口
- 🎓 AI模型微调训练数据
- 💊 用药指导和说明

**包含信息**:
- 性味归经
- 功效主治
- 用法用量
- 配伍禁忌

---

### 4. 药方数据集.json - 经典方剂库

**数据类型**: 结构化方剂数据

**示例数据**:
```json
{
  "id": 1,
  "方名": "四君子汤",
  "出处": "《太平惠民和剂局方》",
  "功效": "益气健脾",
  "主治": "脾胃气虚证。面色萎白，语声低微，气短乏力，食少便溏...",
  "组成": [
    {"药材": "人参", "剂量": "9g", "角色": "君", "功效": "大补元气，健脾养胃"},
    {"药材": "白术", "剂量": "9g", "角色": "臣", "功效": "健脾燥湿"},
    {"药材": "茯苓", "剂量": "9g", "角色": "佐", "功效": "渗湿健脾"},
    {"药材": "甘草", "剂量": "6g", "角色": "使", "功效": "中和调药"}
  ],
  "配伍特点": "温而不燥，补而不峻",
  "现代应用": "慢性胃炎、胃溃疡、消化不良属脾胃气虚者"
}
```

**用途**:
- 🔍 相似方剂推荐
- 📊 方剂组成分析
- 🎯 AI智能配方
- 📚 经典方剂学习

---

## 🚀 在项目中的应用场景

### 场景1: AI智能推荐方剂
```
用户症状 → 分析病机 → 匹配经典方剂 
         → 检查配伍关系 → 验证安全性 → 推荐方案
```

### 场景2: 处方审核
```
用户自组方剂 → 检查十八反十九畏 
            → 分析配伍关系 
            → 给出安全性评估和建议
```

### 场景3: 学习辅助
```
查询药材 → 返回功效性味 
        → 展示相关方剂 
        → 显示配伍宜忌
```

### 场景4: 方剂分析
```
输入方剂 → 分析组成 
        → 评价配伍关系 
        → 解释君臣佐使 
        → 预测功效主治
```

---

## 💡 后续开发建议

### 1. 创建知识库服务 (knowledgeService.js)
```javascript
class KnowledgeService {
  // 加载四相数据
  loadSixiang()
  
  // 加载十八反十九畏
  loadContraindications()
  
  // 加载药材数据
  loadHerbs()
  
  // 加载方剂数据
  loadFormulas()
  
  // 配伍关系查询
  checkCompatibility(herb_a, herb_b)
  
  // 禁忌检查
  checkContraindications(herbs[])
  
  // 方剂匹配
  matchFormula(symptoms, pattern)
}
```

### 2. 创建AI服务路由
```javascript
POST /api/ai/recommend-formula
POST /api/ai/analyze-composition
POST /api/ai/check-safety
GET  /api/ai/herb-info/:name
```

### 3. 集成到模拟诊断模块
- 用户输入症状
- AI分析证候
- 推荐合适方剂
- 显示配伍分析
- 安全性检查

---

## 📊 数据质量

| 指标 | 评分 |
|------|------|
| 数据完整性 | ⭐⭐⭐⭐⭐ |
| 结构规范性 | ⭐⭐⭐⭐⭐ |
| 专业准确性 | ⭐⭐⭐⭐⭐ |
| AI可用性 | ⭐⭐⭐⭐⭐ |

---

## 🔐 数据来源

- **古典医籍**: 《神农本草经》、《本草纲目》、《太平惠民和剂局方》
- **专业整理**: 经过中医药专业人员整理和验证
- **格式化处理**: 转换为结构化JSON格式，便于程序调用

---

## 🎓 知识库使用规范

### ✅ 应该这样用:
- 作为AI推荐的参考依据
- 辅助用户学习中医药知识
- 提供配伍安全性检查
- 展示经典方剂信息

### ❌ 不应该这样用:
- 替代专业医师诊断
- 作为唯一的治疗依据
- 忽略患者个体差异
- 不考虑现代医学检查

---

## 📝 待完善事项

1. ⏳ 添加更多现代应用案例
2. ⏳ 补充药材图片和视频
3. ⏳ 增加用户反馈机制
4. ⏳ 建立知识库版本控制
5. ⏳ 开发知识图谱可视化

---

**最后更新**: 2025-10-29  
**维护者**: TCM Platform Team

