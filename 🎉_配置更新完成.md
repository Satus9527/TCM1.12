# ğŸ‰ AIæœåŠ¡é…ç½®æ›´æ–°å®Œæˆ

**æ—¥æœŸ**: 2025å¹´11æœˆ2æ—¥  
**çŠ¶æ€**: âœ… **é…ç½®å·²å®Œæˆï¼Œå¯ä»¥å¯åŠ¨æµ‹è¯•**

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ç¯å¢ƒå˜é‡é…ç½®å®Œæˆ âœ…

**å·²åˆ›å»º `.env` æ–‡ä»¶**ï¼ŒåŒ…å«ï¼š

```env
# AI Serviceé…ç½®ï¼ˆæ–°ï¼‰
E1_RECOMMEND_URL=https://subsocial-robbyn-uninfinitely.ngrok-free.dev/consult
E1_ANALYZE_URL=https://subsocial-robbyn-uninfinitely.ngrok-free.dev/consult
E1_HEALTH_URL=https://subsocial-robbyn-uninfinitely.ngrok-free.dev/health
E1_TIMEOUT_MS=15000

# æ•°æ®åº“é…ç½®
DB_PASSWORD=159357

# JWTé…ç½®
JWT_SECRET=903babab31220b05c90b3e88db70e2da7a1aea311b4a49cf2bf3ec9f1f48ba48
```

---

### 2. AIæœåŠ¡è¿æ¥éªŒè¯ âœ…

**å¥åº·æ£€æŸ¥æµ‹è¯•**:
```json
{
  "status": "ok",
  "timestamp": "2025-11-03T06:46:07Z",
  "version": "1.0.0"
}
```

**çŠ¶æ€**: âœ… **AIæœåŠ¡å¯è®¿é—®**

---

## ğŸš€ ä¸‹ä¸€æ­¥ï¼šå¯åŠ¨å¹¶æµ‹è¯•

### æ­¥éª¤1: å¯åŠ¨åç«¯æœåŠ¡

```bash
cd "D:\TCM web"
npm run dev
```

**æˆ–è€…**åŒå‡»è¿è¡Œ: `å¯åŠ¨æœåŠ¡å™¨.bat`

---

### æ­¥éª¤2: æµ‹è¯•AIæ¨èåŠŸèƒ½

**ä½¿ç”¨æµè§ˆå™¨æˆ–curlæµ‹è¯•**:

```bash
# 1. å…ˆç™»å½•è·å–Token
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"health_user","password":"password123"}'

# 2. ä½¿ç”¨Tokenæµ‹è¯•æ¨è
curl -X POST http://localhost:3000/api/recommend/formula \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "symptoms": ["å‘çƒ­", "æ¶å¯’"],
    "tongue_desc": "èˆŒæ·¡çº¢è‹”è–„ç™½"
  }'
```

---

### æ­¥éª¤3: æŸ¥çœ‹æ—¥å¿—

**è§‚å¯ŸAIæœåŠ¡è°ƒç”¨æ—¥å¿—**:

```bash
# PM2æ—¥å¿—ï¼ˆå¦‚æœä½¿ç”¨PM2ï¼‰
pm2 logs tcm-backend

# æˆ–åº”ç”¨æ—¥å¿—
Get-Content -Wait logs/combined.log
```

**å…³é”®ä¿¡æ¯**:
- âœ… AIæœåŠ¡è¿æ¥æˆåŠŸ
- âœ… æ”¶åˆ°AIå“åº”
- âš ï¸ é™çº§æ–¹æ¡ˆï¼ˆå¦‚æœAIæœåŠ¡å¼‚å¸¸ï¼‰

---

## ğŸ“‹ é…ç½®ä¿¡æ¯æ€»ç»“

### AIæœåŠ¡é…ç½® âœ…

| é¡¹ç›® | å€¼ |
|------|-----|
| **Recommend URL** | https://subsocial-robbyn-uninfinitely.ngrok-free.dev/consult |
| **Analyze URL** | https://subsocial-robbyn-uninfinitely.ngrok-free.dev/consult |
| **Health URL** | https://subsocial-robbyn-uninfinitely.ngrok-free.dev/health |
| **è¶…æ—¶æ—¶é—´** | 15000ms (15ç§’) |
| **çŠ¶æ€** | âœ… å¥åº·æ£€æŸ¥é€šè¿‡ |

### æ•°æ®åº“é…ç½® âœ…

| é¡¹ç›® | å€¼ |
|------|-----|
| **ä¸»æœº** | localhost |
| **ç«¯å£** | 3306 |
| **æ•°æ®åº“** | tcm_platform |
| **ç”¨æˆ·å** | root |
| **å¯†ç ** | 159357 |

### æµ‹è¯•è´¦å· âœ…

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| health_user | password123 | å…»ç”Ÿçˆ±å¥½è€… |
| student_wang | password123 | å­¦ç”Ÿ |
| teacher_li | password123 | æ•™å¸ˆ |

---

## âš ï¸ é‡è¦æç¤º

### URLæ—¶æ•ˆ

- **æœ‰æ•ˆæœŸ**: çº¦12å°æ—¶
- **æ³¨æ„**: AIå›¢é˜Ÿé‡å¯åURLä¼šæ”¹å˜
- **å»ºè®®**: å°½å¿«å®Œæˆæµ‹è¯•

### é¦–æ¬¡è¯·æ±‚

- **å¯èƒ½è¾ƒæ…¢**: 5-15ç§’
- **å·²é…ç½®**: è¶…æ—¶æ—¶é—´15ç§’

---

## ğŸ§ª å®Œæ•´æµ‹è¯•æµç¨‹

### 1. å¯åŠ¨æœåŠ¡

```bash
cd "D:\TCM web"
npm run dev
```

**ç­‰å¾…**:
```
ğŸš€ TCM Platform Backend Server
ğŸ“ Environment: development
ğŸŒ Server: http://localhost:3000
ğŸ’š Health: http://localhost:3000/api/health

âœ¨ Server started successfully!
```

---

### 2. æµ‹è¯•å¥åº·æ£€æŸ¥

```bash
curl http://localhost:3000/api/health
```

**é¢„æœŸ**:
```json
{
  "success": true,
  "data": {
    "status": "healthy"
  }
}
```

---

### 3. æµ‹è¯•AIæ¨è

**æµè§ˆå™¨æµ‹è¯•**:
1. æ‰“å¼€: http://localhost:3000/api/auth/login
2. POSTè¯·æ±‚ï¼ˆä½¿ç”¨Postmanæˆ–curlï¼‰
3. è·å–Token
4. æµ‹è¯•æ¨èAPI

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

### è¯¦ç»†æ–‡æ¡£

1. **`ğŸš€_å¿«é€Ÿå¯¹æ¥æŒ‡å—.md`** - å¿«é€Ÿå¯¹æ¥æ­¥éª¤
2. **`ğŸ‰_AI_Service_URLå·²è·å–.md`** - URLè¯¦æƒ…
3. **`ğŸ¤–_Colab_AIé›†æˆæŒ‡å—.md`** - æŠ€æœ¯æ–¹æ¡ˆ
4. **`ğŸ§ª_Colab_AIæµ‹è¯•æŒ‡å—.md`** - æµ‹è¯•æŒ‡å—

### AIå›¢é˜Ÿæ–‡æ¡£

- `ai-team-integration/APIè¦æ±‚æ–‡æ¡£.md` - APIè§„èŒƒ
- `ai-team-integration/æµ‹è¯•ç”¨ä¾‹.md` - æµ‹è¯•ç”¨ä¾‹

---

## âœ… é…ç½®æ£€æŸ¥æ¸…å•

### å·²ç¡®è®¤ âœ…

- [x] .env æ–‡ä»¶å·²åˆ›å»º
- [x] AIæœåŠ¡URLå·²é…ç½®
- [x] è¶…æ—¶æ—¶é—´å·²è®¾ç½®
- [x] å¥åº·æ£€æŸ¥å·²é€šè¿‡
- [x] æ•°æ®åº“é…ç½®æ­£ç¡®
- [x] JWTå¯†é’¥å·²ç”Ÿæˆ

### å¾…æµ‹è¯• â³

- [ ] åç«¯æœåŠ¡å·²å¯åŠ¨
- [ ] æ¨èåŠŸèƒ½æµ‹è¯•
- [ ] åˆ†æåŠŸèƒ½æµ‹è¯•
- [ ] é™çº§æ–¹æ¡ˆéªŒè¯

---

## ğŸ¯ æˆåŠŸæ ‡å¿—

å¯¹æ¥æˆåŠŸçš„æ ‡å¿—:

1. âœ… æœåŠ¡å¯åŠ¨æ— é”™è¯¯
2. âœ… å¥åº·æ£€æŸ¥è¿”å›æ­£å¸¸
3. âœ… æ¨èæ¥å£è¿”å›ç»“æœæˆ–é™çº§æ–¹æ¡ˆ
4. âœ… æ—¥å¿—æ˜¾ç¤ºAIæœåŠ¡è°ƒç”¨
5. âœ… æ— è¿æ¥è¶…æ—¶é”™è¯¯

---

**é…ç½®æ—¶é—´**: 2025å¹´11æœˆ2æ—¥  
**è´Ÿè´£äºº**: åç«¯å›¢é˜Ÿ  
**çŠ¶æ€**: âœ… **é…ç½®å®Œæˆï¼Œå‡†å¤‡å¯åŠ¨æµ‹è¯•**

