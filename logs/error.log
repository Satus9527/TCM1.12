{"correlationId":"3251a115-81da-46de-9396-ccc854846bc7","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 17:46:09","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"bc0c00d0-359d-451b-a3a3-1063361eed0e","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 17:46:14","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"75145710-11e6-4f7d-beab-534ca918b666","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 17:57:04","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"db828622-5dcd-420e-8de4-7e5038d5dbad","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 17:57:04","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"fce03c38-3522-4ef5-a62e-e984f877d9a3","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 17:57:05","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"bb0da342-c07c-44f5-9895-5d462c07517a","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 17:57:06","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"5d294dc9-35a1-447a-9c17-85204eef6a5e","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 17:57:50","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"33afc5c1-c842-43fa-a090-d33a98e2e3fe","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 18:03:01","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"ced41db7-0210-4e26-9c0c-41cc01c576e5","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 18:50:29","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"0864896d-c049-458d-9fd6-0e2f1040d24b","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:39:24)","timestamp":"2026-01-13 18:50:30","url":"/api/medicines/undefined","user":"anonymous"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:141:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 19:19:42"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:147:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 19:26:20"}
{"level":"error","message":"处方分析失败: Unknown column 'meridians' in 'field list'","name":"SequelizeDatabaseError","original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"SELECT `medicine_id`, `name`, `nature`, `flavor`, `meridians` FROM `medicines` AS `Medicine` WHERE `Medicine`.`medicine_id` IN ('61dad1e1-37e8-48ba-bf33-bf29a274187c', '2af9dba4-cb39-48e4-89bf-8d3fa9b33c30');","sqlMessage":"Unknown column 'meridians' in 'field list'","sqlState":"42S22"},"parameters":{},"parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"SELECT `medicine_id`, `name`, `nature`, `flavor`, `meridians` FROM `medicines` AS `Medicine` WHERE `Medicine`.`medicine_id` IN ('61dad1e1-37e8-48ba-bf33-bf29a274187c', '2af9dba4-cb39-48e4-89bf-8d3fa9b33c30');","sqlMessage":"Unknown column 'meridians' in 'field list'","sqlState":"42S22"},"service":"tcm-platform-backend","sql":"SELECT `medicine_id`, `name`, `nature`, `flavor`, `meridians` FROM `medicines` AS `Medicine` WHERE `Medicine`.`medicine_id` IN ('61dad1e1-37e8-48ba-bf33-bf29a274187c', '2af9dba4-cb39-48e4-89bf-8d3fa9b33c30');","stack":"Error\n    at Query.run (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at D:\\TCM web\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Medicine.findAll (D:\\TCM web\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:24:33)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 19:35:14"}
{"correlationId":"13d76474-1558-4271-b669-b1b1a9369bb8","error":"Unknown column 'meridians' in 'field list'","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 19:35:14"}
{"correlationId":"13d76474-1558-4271-b669-b1b1a9369bb8","error":"Unknown column 'meridians' in 'field list'","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error\n    at Query.run (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at D:\\TCM web\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Medicine.findAll (D:\\TCM web\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:24:33)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 19:35:14","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"13d76474-1558-4271-b669-b1b1a9369bb8","ip":"::1","level":"error","message":"Request completed with server error","method":"POST","responseTime":"11ms","service":"tcm-platform-backend","statusCode":500,"timestamp":"2026-01-13 19:35:14","url":"/api/prescriptions/analyze","user":"anonymous"}
{"level":"error","message":"处方分析失败: Unknown column 'meridians' in 'field list'","name":"SequelizeDatabaseError","original":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"SELECT `medicine_id`, `name`, `nature`, `flavor`, `meridians` FROM `medicines` AS `Medicine` WHERE `Medicine`.`medicine_id` IN ('61dad1e1-37e8-48ba-bf33-bf29a274187c', '2af9dba4-cb39-48e4-89bf-8d3fa9b33c30');","sqlMessage":"Unknown column 'meridians' in 'field list'","sqlState":"42S22"},"parameters":{},"parent":{"code":"ER_BAD_FIELD_ERROR","errno":1054,"sql":"SELECT `medicine_id`, `name`, `nature`, `flavor`, `meridians` FROM `medicines` AS `Medicine` WHERE `Medicine`.`medicine_id` IN ('61dad1e1-37e8-48ba-bf33-bf29a274187c', '2af9dba4-cb39-48e4-89bf-8d3fa9b33c30');","sqlMessage":"Unknown column 'meridians' in 'field list'","sqlState":"42S22"},"service":"tcm-platform-backend","sql":"SELECT `medicine_id`, `name`, `nature`, `flavor`, `meridians` FROM `medicines` AS `Medicine` WHERE `Medicine`.`medicine_id` IN ('61dad1e1-37e8-48ba-bf33-bf29a274187c', '2af9dba4-cb39-48e4-89bf-8d3fa9b33c30');","stack":"Error\n    at Query.run (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at D:\\TCM web\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Medicine.findAll (D:\\TCM web\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:24:33)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 19:35:17"}
{"correlationId":"93f163db-1c29-4c88-a9ff-1892cd7712eb","error":"Unknown column 'meridians' in 'field list'","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 19:35:17"}
{"correlationId":"93f163db-1c29-4c88-a9ff-1892cd7712eb","error":"Unknown column 'meridians' in 'field list'","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error\n    at Query.run (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at D:\\TCM web\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async Medicine.findAll (D:\\TCM web\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:24:33)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 19:35:17","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"93f163db-1c29-4c88-a9ff-1892cd7712eb","ip":"::1","level":"error","message":"Request completed with server error","method":"POST","responseTime":"4ms","service":"tcm-platform-backend","statusCode":500,"timestamp":"2026-01-13 19:35:17","url":"/api/prescriptions/analyze","user":"anonymous"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:147:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 19:37:29"}
{"level":"error","message":"处方分析失败: safetyCheckService.checkSafety is not a function","service":"tcm-platform-backend","stack":"TypeError: safetyCheckService.checkSafety is not a function\n    at PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:39:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 21:03:21"}
{"correlationId":"a999b7cc-007e-4040-bcf1-1adb9e62b0f4","error":"safetyCheckService.checkSafety is not a function","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 21:03:21"}
{"level":"error","message":"处方分析失败: safetyCheckService.checkSafety is not a function","service":"tcm-platform-backend","stack":"TypeError: safetyCheckService.checkSafety is not a function\n    at PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:39:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 21:07:23"}
{"correlationId":"76a64c7e-8dc5-4a88-a257-0072e27d9415","error":"safetyCheckService.checkSafety is not a function","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 21:07:23"}
{"level":"error","message":"处方分析失败: safetyCheckService.checkSafety is not a function","service":"tcm-platform-backend","stack":"TypeError: safetyCheckService.checkSafety is not a function\n    at PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:39:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 21:08:01"}
{"correlationId":"796a1df5-234a-4932-baf1-94b2999e481c","error":"safetyCheckService.checkSafety is not a function","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 21:08:01"}
{"level":"error","message":"处方分析失败: safetyCheckService.checkSafety is not a function","service":"tcm-platform-backend","stack":"TypeError: safetyCheckService.checkSafety is not a function\n    at PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:39:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 21:08:14"}
{"correlationId":"a4e456b0-26b7-4569-ad9d-b07ad1bc999b","error":"safetyCheckService.checkSafety is not a function","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 21:08:14"}
{"level":"error","message":"处方分析失败: safetyCheckService.checkSafety is not a function","service":"tcm-platform-backend","stack":"TypeError: safetyCheckService.checkSafety is not a function\n    at PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:39:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 21:14:18"}
{"correlationId":"2964343a-7ed1-4e4b-b8dc-56db51cb50ce","error":"safetyCheckService.checkSafety is not a function","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 21:14:18"}
{"level":"error","message":"处方分析失败: safetyCheckService.checkSafety is not a function","service":"tcm-platform-backend","stack":"TypeError: safetyCheckService.checkSafety is not a function\n    at PrescriptionService.analyzePrescription (D:\\TCM web\\src\\services\\prescriptionService.js:39:52)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async analyzePrescription (D:\\TCM web\\src\\controllers\\prescriptionController.js:15:30)","timestamp":"2026-01-13 21:14:19"}
{"correlationId":"453b4c80-2bb9-4602-b64b-865bb4516ee0","error":"safetyCheckService.checkSafety is not a function","level":"error","message":"处方分析失败","service":"tcm-platform-backend","timestamp":"2026-01-13 21:14:19"}
{"correlationId":"d1313008-d955-4d78-8303-f3eed336592d","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:40:24)","timestamp":"2026-01-13 22:27:03","url":"/api/medicines/undefined","user":"anonymous"}
{"correlationId":"ea8832b6-5066-44e3-aa85-f72b564f2183","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:93:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:40:24)","timestamp":"2026-01-13 22:27:05","url":"/api/medicines/undefined","user":"anonymous"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:147:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 22:34:12"}
{"correlationId":"acb61364-e8e1-46ce-9c18-f201fb6b90d2","error":"药材不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 药材不存在\n    at MedicineService.getMedicineById (D:\\TCM web\\src\\services\\medicineService.js:95:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getMedicineById (D:\\TCM web\\src\\controllers\\medicineController.js:40:24)","timestamp":"2026-01-13 22:35:31","url":"/api/medicines/1","user":"anonymous"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:147:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 22:39:18"}
{"correlationId":"290fda55-14a5-4c17-ad6e-b6495ce4cca4","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 23:04:33","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"20cd5a16-1e6a-4f1b-8479-85ec92d0085e","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 23:04:36","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"8eada20e-db58-4cce-ad8a-34bf68a29c40","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 23:04:37","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"3bba32db-226a-4358-844e-8d05972fa8ce","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 23:04:37","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"d70d11de-47be-452a-aebb-23a81502252b","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 23:04:50","url":"/api/prescriptions/analyze","user":"anonymous"}
{"correlationId":"29f2bd61-4edd-4c7c-849d-1f750b7056d6","error":"Not allowed by CORS","ip":"::1","level":"error","message":"Error occurred:","method":"POST","service":"tcm-platform-backend","stack":"Error: Not allowed by CORS\n    at origin (D:\\TCM web\\src\\middlewares\\corsConfig.js:29:16)\n    at D:\\TCM web\\node_modules\\cors\\lib\\index.js:219:13\n    at optionsCallback (D:\\TCM web\\node_modules\\cors\\lib\\index.js:199:9)\n    at corsMiddleware (D:\\TCM web\\node_modules\\cors\\lib\\index.js:204:7)\n    at Layer.handle [as handle_request] (D:\\TCM web\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\TCM web\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at file:///D:/TCM%20web/node_modules/express-request-id/index.js:24:3","timestamp":"2026-01-13 23:05:04","url":"/api/prescriptions/analyze","user":"anonymous"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:147:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 23:05:58"}
{"address":"::","code":"EADDRINUSE","errno":-4091,"level":"error","message":"Uncaught Exception: listen EADDRINUSE: address already in use :::3000","port":3000,"service":"tcm-platform-backend","stack":"Error: listen EADDRINUSE: address already in use :::3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at Server.listen (node:net:2102:7)\n    at Function.listen (D:\\TCM web\\node_modules\\express\\lib\\application.js:635:24)\n    at startServer (D:\\TCM web\\src\\app.js:147:22)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","syscall":"listen","timestamp":"2026-01-13 23:06:05"}
{"level":"error","message":"获取用户统计数据失败: Table 'tcm_platform.user_learning_records' doesn't exist","name":"SequelizeDatabaseError","original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT SUM(`duration`) AS `total_duration` FROM `user_learning_records` AS `UserLearningRecord` WHERE `UserLearningRecord`.`user_id` = 'test_user_1';","sqlMessage":"Table 'tcm_platform.user_learning_records' doesn't exist","sqlState":"42S02"},"parameters":{},"parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT SUM(`duration`) AS `total_duration` FROM `user_learning_records` AS `UserLearningRecord` WHERE `UserLearningRecord`.`user_id` = 'test_user_1';","sqlMessage":"Table 'tcm_platform.user_learning_records' doesn't exist","sqlState":"42S02"},"service":"tcm-platform-backend","sql":"SELECT SUM(`duration`) AS `total_duration` FROM `user_learning_records` AS `UserLearningRecord` WHERE `UserLearningRecord`.`user_id` = 'test_user_1';","stack":"Error\n    at Query.run (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at D:\\TCM web\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.select (D:\\TCM web\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:407:12)\n    at async UserLearningRecord.findAll (D:\\TCM web\\node_modules\\sequelize\\lib\\model.js:1140:21)\n    at async getUserStats (D:\\TCM web\\src\\controllers\\userController.js:59:31)","timestamp":"2026-01-14 12:24:11"}
{"correlationId":"1f04613c-b1d6-40ae-984a-b70064fd3a04","error":"用户不存在","ip":"::1","level":"error","message":"Error occurred:","method":"GET","service":"tcm-platform-backend","stack":"Error: 用户不存在\n    at AuthService.getUserProfile (D:\\TCM web\\src\\services\\authService.js:328:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async getUserInfo (D:\\TCM web\\src\\controllers\\userController.js:12:20)","timestamp":"2026-01-14 12:25:10","url":"/api/user/info","user":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:52:39","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:52:41","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:52:42","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:52:49","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:54:54","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:55:17","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:55:32","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:55:33","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:55:33","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:55:33","userId":"test_user_1"}
{"error":"Error","level":"error","message":"AI咨询失败","service":"tcm-platform-backend","timestamp":"2026-01-14 14:55:33","userId":"test_user_1"}
{"answer":"配伍分析完成。<JSON_START>{\"overall_properties\": {\"nature\": \"平\", \"flavor\": [\"甘\"], \"meridian\": [\"脾\", \"胃\"]}, \"functions_analysis\": {\"调和\": 6, \"补益\": 5}, \"suggestions\": [\"请咨询医师具体用法\", \"根据具体症状调整用量\"]}<JSON_END>","error":"Unexpected non-whitespace character after JSON at position 166 (line 1 column 167)","level":"error","message":"解析AI响应JSON失败","service":"tcm-platform-backend","timestamp":"2026-01-14 15:08:34","userId":"test_user_1"}
{"answer":"配伍分析完成。<JSON_START>{\"overall_properties\": {\"nature\": \"平\", \"flavor\": [\"甘\"], \"meridian\": [\"脾\", \"胃\"]}, \"functions_analysis\": {\"调和\": 6, \"补益\": 5}, \"suggestions\": [\"请咨询医师具体用法\", \"根据具体症状调整用量\"]}<JSON_END>","error":"Unexpected non-whitespace character after JSON at position 166 (line 1 column 167)","level":"error","message":"解析AI响应JSON失败","service":"tcm-platform-backend","timestamp":"2026-01-14 15:09:03","userId":"test_user_1"}
