# ğŸ“‹ å‰ç«¯ç•Œé¢å¼€å‘è§„èŒƒæŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-01-03  
**é€‚ç”¨**: Vue 3 + Element Plus + Vite

---

## 1. é¡µé¢å¸ƒå±€è§„èŒƒ

### 1.1 æ•´ä½“ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Header (64px)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚                      â”‚
â”‚Side  â”‚   Main Content       â”‚
â”‚bar   â”‚                      â”‚
â”‚(240) â”‚                      â”‚
â”‚      â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¦æ±‚**:
- Header: å›ºå®šé¡¶éƒ¨ï¼Œé«˜åº¦64px
- Sidebar: æ¡Œé¢ç«¯240pxï¼Œç§»åŠ¨ç«¯åº•éƒ¨å¯¼èˆª
- Main: æœ€å¤§å®½åº¦1200pxï¼Œå±…ä¸­ï¼Œå†…è¾¹è·24px

---

## 2. æ ¸å¿ƒé¡µé¢è®¾è®¡

### 2.1 ç™»å½•é¡µ (`/login`)

**å¸ƒå±€**:
- å…¨å±ï¼Œä¸æ˜¾ç¤ºHeader/Sidebar
- ç™»å½•å¡ç‰‡å®½åº¦400pxï¼Œå±…ä¸­

**è¡¨å•å­—æ®µ**:
- ç”¨æˆ·åè¾“å…¥æ¡†
- å¯†ç è¾“å…¥æ¡†
- ç™»å½•æŒ‰é’®
- æ¼”ç¤ºè´¦å·æç¤º

**API**: `POST /api/auth/login`
```json
{ "username": "health_user", "password": "password123" }
```

---

### 2.2 é¦–é¡µ (`/dashboard`)

**å¸ƒå±€**:
- é¡¶éƒ¨: æ¬¢è¿ä¿¡æ¯ + æ—¶é—´
- ä¸­éƒ¨: 4ä¸ªç»Ÿè®¡å¡ç‰‡ï¼ˆè¯æã€æ–¹å‰‚ã€æ”¶è—ã€æ¨¡æ‹Ÿæ¬¡æ•°ï¼‰
- ä¸‹éƒ¨: æ¨èå†…å®¹ + æœ€è¿‘æ´»åŠ¨

**API**:
- è¯ææ€»æ•°: `GET /api/medicines?limit=1` â†’ `pagination.total`
- æ–¹å‰‚æ€»æ•°: `GET /api/formulas?limit=1` â†’ `pagination.total`
- æ”¶è—: `GET /api/content/collections` â†’ æ•°ç»„é•¿åº¦
- æ¨¡æ‹Ÿ: `GET /api/content/simulations` â†’ æ•°ç»„é•¿åº¦

---

### 2.3 çŸ¥è¯†åº“ (`/knowledge`)

**å¸ƒå±€**:
```
å·¦ä¾§åˆ†ç±»å¯¼èˆª (240px) | å³ä¾§å†…å®¹åŒº
- åˆ†ç±»åˆ—è¡¨          | - æœç´¢æ¡†
- æ•°é‡æ ‡ç­¾          | - ç­›é€‰æ¡ä»¶
                     | - è¯æ/æ–¹å‰‚å¡ç‰‡åˆ—è¡¨
                     | - åˆ†é¡µå™¨
```

**è¯æå¡ç‰‡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [å›¾ç‰‡] è¯æåç§°   â”‚
â”‚ æ€§å‘³: ç”˜ã€æ¸©     â”‚
â”‚ åŠŸæ•ˆ: è¡¥æ°”ã€å¥è„¾ â”‚
â”‚ [æ”¶è—] [è¯¦æƒ…]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API**:
- æœç´¢: `GET /api/medicines?search=å…³é”®è¯&page=1&limit=20`
- è¯¦æƒ…: `GET /api/medicines/:id`

**åˆ†é¡µ**: æ¯é¡µ20æ¡ï¼Œä½¿ç”¨ `el-pagination`

---

### 2.4 è¯¦æƒ…é¡µ

**å¸ƒå±€**:
- è¿”å›æŒ‰é’® + æ ‡é¢˜
- å›¾ç‰‡ï¼ˆå·¦ä¾§/é¡¶éƒ¨ï¼‰
- åŸºæœ¬ä¿¡æ¯å¡ç‰‡
- è¯¦ç»†ä¿¡æ¯ï¼ˆåŠŸæ•ˆã€ç”¨æ³•ã€ç°ä»£ç ”ç©¶ç­‰ï¼‰
- å¸¸ç”¨è¯æ–¹/ç»„æˆåˆ—è¡¨ï¼ˆåº•éƒ¨ï¼‰

**å­—æ®µæ˜ å°„**:
| åç«¯å­—æ®µ | å‰ç«¯æ˜¾ç¤º |
|---------|---------|
| `medicine_id` | ID |
| `name` | æ ‡é¢˜ |
| `english_name` | è‹±æ–‡å/æ‹‰ä¸å |
| `nature` + `flavor` | æ€§å‘³ |
| `meridian` | å½’ç» |
| `toxicity` | æ¯’æ€§ |
| `efficacy` | åŠŸæ•ˆ |
| `usage_dosage` | ç”¨æ³•ç”¨é‡ |
| `modern_research` | ç°ä»£ç ”ç©¶ |
| `common_formulas` | å¸¸ç”¨è¯æ–¹ï¼ˆè¯æï¼‰|

**API**: 
- è¯¦æƒ…: `GET /api/medicines/:id`
- æ”¶è—: `POST /api/content/collections`

---

### 2.5 å¤„æ–¹æ¨è (`/recommend`)

**å¸ƒå±€**:
```
ç—‡çŠ¶è¾“å…¥åŒº:
- ç—‡çŠ¶æ ‡ç­¾ï¼ˆå¯åˆ é™¤ï¼‰
- è¾“å…¥æ¡† + æ·»åŠ æŒ‰é’®

èˆŒè±¡æè¿°ï¼ˆå¯é€‰ï¼‰:
- å¤šè¡Œæ–‡æœ¬è¾“å…¥

ç”¨æˆ·ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰:
- å¹´é¾„ã€æ€§åˆ«ç­‰

[å¼€å§‹æ¨è] æŒ‰é’®

æ¨èç»“æœåŒº:
- è¾¨è¯ç»“æœ
- æ¨èæ–¹å‰‚åˆ—è¡¨ï¼ˆåç§°ã€ç»„æˆã€ç†ç”±ã€ç½®ä¿¡åº¦ï¼‰
```

**API**: `POST /api/recommend/formula`
```json
{
  "symptoms": ["å‘çƒ­", "æ¶å¯’"],
  "tongue_desc": "èˆŒæ·¡çº¢è‹”è–„ç™½"
}
```

**å“åº”æ˜¾ç¤º**:
- `syndrome`: è¾¨è¯ç»“æœ
- `recommendations[].formula`: æ–¹å‰‚ä¿¡æ¯
- `recommendations[].reasoning`: æ¨èç†ç”±
- `recommendations[].confidence`: ç½®ä¿¡åº¦

---

### 2.6 æ¨¡æ‹Ÿå¼€æ–¹ (`/simulation`)

**å¸ƒå±€**:
```
è¯æé€‰æ‹©åŒº (å·¦ä¾§) | AIåˆ†æç»“æœåŒº (å³ä¾§)
- æœç´¢æ¡†          | - æ•´ä½“è¯æ€§
- è¯æåˆ—è¡¨        | - åŠŸæ•ˆåˆ†æï¼ˆé›·è¾¾å›¾ï¼‰
                  | - ä½¿ç”¨å»ºè®®
                  | - æ³¨æ„äº‹é¡¹
                  
å½“å‰é…ä¼:
- è¯æåˆ—è¡¨ + ç”¨é‡è¾“å…¥ + åˆ é™¤

[ä¿å­˜æ–¹æ¡ˆ] [æ¸…ç©º]
```

**API**:
- æœç´¢è¯æ: `GET /api/medicines?search=å…³é”®è¯`
- ä¿å­˜æ–¹æ¡ˆ: `POST /api/content/simulations`

**å®æ—¶åˆ†æ**: æ·»åŠ /åˆ é™¤è¯æåå»¶è¿Ÿ500msè§¦å‘

---

### 2.7 ä¸ªäººä¸­å¿ƒ (`/content`)

**å¸ƒå±€**:
- Tabåˆ‡æ¢: æ”¶è—ã€å­¦ä¹ è®°å½•ã€æˆ‘çš„å¤„æ–¹ã€ä¸Šä¼ æ–‡ä»¶
- å†…å®¹åˆ—è¡¨: å¡ç‰‡å½¢å¼ï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯

**API**:
- æ”¶è—: `GET /api/content/collections`
- å–æ¶ˆæ”¶è—: `DELETE /api/content/collections/:id`
- å¤„æ–¹: `GET /api/content/simulations`

---

## 3. APIå¯¹æ¥è§„èŒƒ

### 3.1 åŸºç¡€é…ç½®

**ç¯å¢ƒå˜é‡**: `.env.development`
```
VITE_API_BASE_URL=http://localhost:3000/api
```

**è¯·æ±‚æ‹¦æˆªå™¨** (`utils/request.js`):
```javascript
import axios from 'axios'

const request = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL,
  timeout: 10000
})

// æ·»åŠ  Token
request.interceptors.request.use(config => {
  const token = localStorage.getItem('access_token')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// é”™è¯¯å¤„ç†
request.interceptors.response.use(
  response => response.data,
  error => {
    if (error.response?.status === 401) {
      // Tokenè¿‡æœŸï¼Œè·³è½¬ç™»å½•
      localStorage.removeItem('access_token')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export default request
```

---

### 3.2 ç»Ÿä¸€å“åº”æ ¼å¼

**æˆåŠŸ**:
```json
{ "success": true, "data": {...} }
```

**é”™è¯¯**:
```json
{
  "success": false,
  "error": { "code": "ERROR_CODE", "message": "é”™è¯¯ä¿¡æ¯" }
}
```

---

### 3.3 é”™è¯¯å¤„ç†

- 401: æ¸…é™¤Tokenï¼Œè·³è½¬ç™»å½•
- 403: æ˜¾ç¤º"æƒé™ä¸è¶³"
- 404: æ˜¾ç¤º"èµ„æºä¸å­˜åœ¨"
- 500: æ˜¾ç¤º"æœåŠ¡å™¨é”™è¯¯"

ä½¿ç”¨ `ElMessage.error()` æ˜¾ç¤ºé”™è¯¯

---

## 4. ç»„ä»¶è§„èŒƒ

### 4.1 å¡ç‰‡ç»„ä»¶

**è¯æå¡ç‰‡**:
- å›¾ç‰‡: 120Ã—120px
- æ ‡é¢˜: 18pxï¼ŒåŠ ç²—
- å†…å®¹: 14pxï¼Œç°è‰²
- é—´è·: 16px

### 4.2 åˆ†é¡µç»„ä»¶

ä½¿ç”¨ `el-pagination`:
- æ¯é¡µ: 20æ¡
- å¸ƒå±€: `total, sizes, prev, pager, next, jumper`

### 4.3 åŠ è½½çŠ¶æ€

ä½¿ç”¨ `el-skeleton` æˆ– `el-loading`

---

## 5. æ ·å¼è§„èŒƒ

### 5.1 é¢œè‰²

- ä¸»è‰²: `#2a9d8f`
- è¾…åŠ©è‰²: `#e76f51`
- èƒŒæ™¯: `#f8f9fa`
- æ–‡å­—: `#2c3e50`

### 5.2 å­—ä½“

- ä¸­æ–‡: `Microsoft YaHei`, `SimHei`
- åŸºå‡†: `14px`
- æ ‡é¢˜: `24px`, `18px`

### 5.3 é—´è·

- ç»„ä»¶: `16px`, `24px`, `32px`
- é¡µé¢: `24px` (æ¡Œé¢), `16px` (ç§»åŠ¨)

### 5.4 åœ†è§’

- å¡ç‰‡: `8px`
- æŒ‰é’®: `4px`

---

## 6. å“åº”å¼è®¾è®¡

### 6.1 æ–­ç‚¹

- ç§»åŠ¨: `<768px`
- å¹³æ¿: `768px - 991px`
- æ¡Œé¢: `â‰¥992px`

### 6.2 ç§»åŠ¨ç«¯é€‚é…

- Sidebar: åº•éƒ¨å¯¼èˆªæ 
- å¡ç‰‡: å•åˆ—æ˜¾ç¤º
- è¡¨å•: å•åˆ—å¸ƒå±€

---

## 7. äº¤äº’æµç¨‹

### 7.1 ç™»å½•
```
è¾“å…¥è´¦å·å¯†ç  â†’ ç‚¹å‡»ç™»å½• â†’ æ˜¾ç¤ºåŠ è½½ â†’ APIè°ƒç”¨
â†’ æˆåŠŸ: ä¿å­˜Token + è·³è½¬é¦–é¡µ
â†’ å¤±è´¥: æ˜¾ç¤ºé”™è¯¯æç¤º
```

### 7.2 æœç´¢
```
è¾“å…¥å…³é”®è¯ â†’ é˜²æŠ–300ms â†’ APIè°ƒç”¨ â†’ æ˜¾ç¤ºç»“æœ
â†’ ç‚¹å‡»ç»“æœ â†’ è·³è½¬è¯¦æƒ…
```

### 7.3 æ¨è
```
è¾“å…¥ç—‡çŠ¶ â†’ ç‚¹å‡»æ¨è â†’ æ˜¾ç¤ºåŠ è½½ â†’ APIè°ƒç”¨
â†’ æ˜¾ç¤ºè¾¨è¯ç»“æœ + æ¨èæ–¹å‰‚åˆ—è¡¨
â†’ ç‚¹å‡»æ–¹å‰‚ â†’ è·³è½¬è¯¦æƒ…
```

---

## 8. å¿…æ£€æ¸…å•

- âœ… æ‰€æœ‰APIè°ƒç”¨ä½¿ç”¨ `request.js` æ‹¦æˆªå™¨
- âœ… æ‰€æœ‰é”™è¯¯ä½¿ç”¨ `ElMessage` æç¤º
- âœ… æ‰€æœ‰åˆ—è¡¨ä½¿ç”¨ `el-pagination` åˆ†é¡µ
- âœ… Tokenæ­£ç¡®å­˜å‚¨åœ¨ `localStorage`
- âœ… 401é”™è¯¯è‡ªåŠ¨è·³è½¬ç™»å½•
- âœ… åŠ è½½çŠ¶æ€æ­£ç¡®æ˜¾ç¤º
- âœ… å“åº”å¼å¸ƒå±€æ­£ç¡®å®ç°
- âœ… å­—æ®µæ˜ å°„ä¸åç«¯APIä¸€è‡´

---

## 9. æ¼”ç¤ºè´¦å·

```
å…»ç”Ÿçˆ±å¥½è€…: health_user / password123
å­¦ç”Ÿ: student_wang / password123
æ•™å¸ˆ: teacher_li / password123
```

---

**å®Œæˆä»¥ä¸Šè§„èŒƒï¼Œå‰ç«¯ç•Œé¢å°†å®Œå…¨ç¬¦åˆåç«¯APIè¦æ±‚ï¼**
