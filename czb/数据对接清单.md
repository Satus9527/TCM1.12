# czbå‰ç«¯æ•°æ®å¯¹æ¥æ¸…å•

## ğŸ“‹ ç›®å½•
1. [éœ€è¦å¯¹æ¥æ•°æ®åº“çš„æ¨¡å—](#éœ€è¦å¯¹æ¥æ•°æ®åº“çš„æ¨¡å—)
2. [éœ€è¦APIæ¥å£çš„æ¨¡å—](#éœ€è¦apiæ¥å£çš„æ¨¡å—)
3. [ä½¿ç”¨è™šæ‹Ÿæ•°æ®çš„åœ°æ–¹](#ä½¿ç”¨è™šæ‹Ÿæ•°æ®çš„åœ°æ–¹)
4. [æ•°æ®æ ¼å¼è§„èŒƒ](#æ•°æ®æ ¼å¼è§„èŒƒ)

---

## ğŸ”Œ éœ€è¦å¯¹æ¥æ•°æ®åº“çš„æ¨¡å—

### 1. ç”¨æˆ·è®¤è¯æ¨¡å— (auth.js)
**æ–‡ä»¶ä½ç½®**: `czb/src/api/auth.js`

#### éœ€è¦æ•°æ®åº“è¡¨ï¼š
- **users** - ç”¨æˆ·è¡¨
  - id (ä¸»é”®)
  - username (ç”¨æˆ·åï¼Œå”¯ä¸€)
  - password (å¯†ç ï¼ŒåŠ å¯†å­˜å‚¨)
  - name (å§“å)
  - role (è§’è‰²ï¼šç”¨æˆ·/åŒ»å¸ˆ/ç®¡ç†å‘˜)
  - avatar (å¤´åƒURL)
  - createdAt (åˆ›å»ºæ—¶é—´)
  - updatedAt (æ›´æ–°æ—¶é—´)

- **tokens** - Tokenè¡¨ï¼ˆå¯é€‰ï¼Œç”¨äºtokenç®¡ç†ï¼‰
  - id
  - userId (å¤–é”®å…³è”users)
  - token (tokenå€¼)
  - expiresAt (è¿‡æœŸæ—¶é—´)
  - createdAt

#### éœ€è¦APIæ¥å£ï¼š
1. **POST /api/auth/login** - ç”¨æˆ·ç™»å½•
   - è¯·æ±‚å‚æ•°ï¼š`{ username: string, password: string }`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { token: string, user: {...} } }`

2. **POST /api/auth/register** - ç”¨æˆ·æ³¨å†Œ
   - è¯·æ±‚å‚æ•°ï¼š`{ username: string, password: string, name?: string }`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { id: number, username: string, name: string } }`

3. **GET /api/user/info** - è·å–ç”¨æˆ·ä¿¡æ¯
   - è¯·æ±‚å¤´ï¼š`Authorization: Bearer {token}`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { id, username, name, role, avatar } }`

4. **POST /api/auth/refresh** - åˆ·æ–°token
   - è¯·æ±‚å¤´ï¼š`Authorization: Bearer {token}`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { token: string } }`

5. **POST /api/auth/logout** - é€€å‡ºç™»å½•
   - è¯·æ±‚å¤´ï¼š`Authorization: Bearer {token}`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'é€€å‡ºæˆåŠŸ' }`

---

### 2. è¯æç®¡ç†æ¨¡å— (medicine.js)
**æ–‡ä»¶ä½ç½®**: `czb/src/api/medicine.js`

#### éœ€è¦æ•°æ®åº“è¡¨ï¼š
- **medicines** - è¯æè¡¨
  - id (ä¸»é”®)
  - name (è¯æåç§°ï¼Œå¦‚ï¼šäººå‚)
  - latinName (æ‹‰ä¸å­¦å)
  - category (åˆ†ç±»ï¼štonifying/heat-clearing/exterior/dampness-removing/qi-regulating/blood-activating/blood-tonifying)
  - property (æ€§å‘³ï¼Œå¦‚ï¼šç”˜ã€å¾®è‹¦ï¼Œå¾®æ¸©)
  - meridian (å½’ç»ï¼Œå¦‚ï¼šè„¾ã€è‚ºã€å¿ƒã€è‚¾ç»)
  - efficacy (åŠŸæ•ˆä¸»æ²»)
  - toxicity (æ¯’æ€§ï¼šæ— æ¯’/æœ‰æ¯’)
  - suggestedDosage (å»ºè®®å‰‚é‡ï¼Œå¦‚ï¼š3-9)
  - maxDosage (æœ€å¤§å‰‚é‡ï¼Œå¦‚ï¼š15)
  - flavor (æ€§å‘³æ•°ç»„ï¼ŒJSONæ ¼å¼ï¼š["ç”˜", "å¾®è‹¦"])
  - usage_notes (ç”¨æ³•è¯´æ˜)
  - contraindications (ç¦å¿Œï¼ŒJSONæ•°ç»„)
  - modernResearch (ç°ä»£ç ”ç©¶)
  - createdAt
  - updatedAt

- **medicine_categories** - è¯æåˆ†ç±»è¡¨
  - id
  - code (åˆ†ç±»ä»£ç ï¼štonifying/heat-clearingç­‰)
  - name (åˆ†ç±»åç§°ï¼šè¡¥è™šè¯/æ¸…çƒ­è¯ç­‰)
  - icon (å›¾æ ‡ç±»å)
  - count (è¯¥åˆ†ç±»ä¸‹çš„è¯ææ•°é‡)

- **user_favorites** - ç”¨æˆ·æ”¶è—è¡¨
  - id
  - userId (å¤–é”®å…³è”users)
  - medicineId (å¤–é”®å…³è”medicines)
  - createdAt

#### éœ€è¦APIæ¥å£ï¼š
1. **GET /api/medicines** - æœç´¢è¯æ
   - æŸ¥è¯¢å‚æ•°ï¼š
     - keyword (å…³é”®è¯ï¼Œå¯é€‰)
     - category (åˆ†ç±»ï¼Œå¯é€‰)
     - page (é¡µç ï¼Œé»˜è®¤1)
     - pageSize (æ¯é¡µæ•°é‡ï¼Œé»˜è®¤12)
     - sort (æ’åºæ–¹å¼ï¼šdefault/name/category)
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "list": [è¯æå¯¹è±¡æ•°ç»„],
         "total": æ€»æ•°é‡,
         "page": å½“å‰é¡µ,
         "pageSize": æ¯é¡µæ•°é‡,
         "totalPages": æ€»é¡µæ•°
       }
     }
     ```

2. **GET /api/medicines/:id** - è·å–è¯æè¯¦æƒ…
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { å®Œæ•´è¯æå¯¹è±¡ } }`

3. **GET /api/medicine-categories** - è·å–è¯æåˆ†ç±»
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": [
         {
           "id": "all",
           "name": "å…¨éƒ¨è¯æ",
           "icon": "el-icon-menu",
           "count": 56
         },
         ...
       ]
     }
     ```

4. **POST /api/medicines/:id/favorite** - æ”¶è—/å–æ¶ˆæ”¶è—è¯æ
   - è¯·æ±‚å¤´ï¼š`Authorization: Bearer {token}`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'æ“ä½œæˆåŠŸ' }`

---

### 3. æ–¹å‰‚ç®¡ç†æ¨¡å— (prescription.js)
**æ–‡ä»¶ä½ç½®**: `czb/src/api/prescription.js`

#### éœ€è¦æ•°æ®åº“è¡¨ï¼š
- **prescriptions** - æ–¹å‰‚è¡¨
  - id (ä¸»é”®)
  - name (æ–¹å‰‚åç§°)
  - source (æ¥æºï¼Œå¦‚ï¼šã€Šå¤ªå¹³æƒ æ°‘å’Œå‰‚å±€æ–¹ã€‹)
  - efficacy (åŠŸæ•ˆ)
  - mainDisease (ä¸»æ²»ç—…ç—‡)
  - description (æè¿°)
  - compatibilityScore (é…ä¼è¯„åˆ†ï¼Œ0-100)
  - compatibilityFeatures (é…ä¼ç‰¹ç‚¹)
  - modernApplication (ç°ä»£åº”ç”¨)
  - userId (åˆ›å»ºè€…IDï¼Œå¤–é”®å…³è”users)
  - createdAt
  - updatedAt

- **prescription_medicines** - æ–¹å‰‚è¯æå…³è”è¡¨
  - id
  - prescriptionId (å¤–é”®å…³è”prescriptions)
  - medicineId (å¤–é”®å…³è”medicines)
  - dosage (å‰‚é‡ï¼Œæ•°å­—)
  - role (è§’è‰²ï¼šmonarch/minister/assistant/guideï¼Œå¯¹åº”å›è¯/è‡£è¯/ä½è¯/ä½¿è¯)
  - efficacy (è¯¥è¯æåœ¨æ­¤æ–¹å‰‚ä¸­çš„ä½œç”¨)

#### éœ€è¦APIæ¥å£ï¼š
1. **POST /api/prescriptions/analyze** - é…ä¼åˆ†æ
   - è¯·æ±‚å‚æ•°ï¼š
     ```json
     {
       "medicines": [
         {
           "id": 1,
           "name": "äººå‚",
           "dosage": 9,
           "role": "monarch",
           "property": "ç”˜ã€å¾®è‹¦ï¼Œå¾®æ¸©",
           "meridian": "è„¾ã€è‚ºã€å¿ƒã€è‚¾ç»",
           "flavor": ["ç”˜", "å¾®è‹¦"]
         },
         ...
       ]
     }
     ```
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "tasteAnalysis": [
           { "name": "ç”˜", "percentage": 42, "color": "#e6a23c" },
           ...
         ],
         "meridianAnalysis": [
           { "name": "è„¾ç»", "intensity": 85 },
           ...
         ],
         "synergyEffects": [
           {
             "type": "è¡¥æ°”æ•ˆæœ",
             "effect": 15,
             "description": "é»„èŠªä¸äººå‚ååŒå¢å¼ºè¡¥æ°”æ•ˆæœ"
           }
         ],
         "tabooList": [
           {
             "combination": "ç”˜è‰+ç”˜é‚",
             "reason": "åå…«åç¦å¿Œï¼Œå¯èƒ½äº§ç”Ÿæ¯’æ€§ååº”",
             "severity": "high"
           }
         ],
         "safetySuggestions": ["å»ºè®®1", "å»ºè®®2"],
         "compatibilityScore": 85
       }
     }
     ```

2. **POST /api/prescriptions** - ä¿å­˜å¤„æ–¹
   - è¯·æ±‚å‚æ•°ï¼š
     ```json
     {
       "name": "å¤„æ–¹åç§°",
       "description": "æè¿°",
       "mainDisease": "ä¸»æ²»ç—…ç—‡",
       "medicines": [
         {
           "id": 1,
           "name": "äººå‚",
           "dosage": 9,
           "role": "monarch"
         },
         ...
       ],
       "compatibilityMode": "classic"
     }
     ```
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { å®Œæ•´å¤„æ–¹å¯¹è±¡ }, message: 'å¤„æ–¹ä¿å­˜æˆåŠŸ' }`

3. **GET /api/prescriptions** - è·å–å¤„æ–¹åˆ—è¡¨
   - æŸ¥è¯¢å‚æ•°ï¼š
     - page (é¡µç )
     - pageSize (æ¯é¡µæ•°é‡)
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "list": [å¤„æ–¹å¯¹è±¡æ•°ç»„],
         "total": æ€»æ•°é‡,
         "page": å½“å‰é¡µ,
         "pageSize": æ¯é¡µæ•°é‡
       }
     }
     ```

4. **GET /api/prescriptions/:id** - è·å–å¤„æ–¹è¯¦æƒ…
   - è¿”å›æ•°æ®ï¼š`{ code: 200, data: { å®Œæ•´å¤„æ–¹å¯¹è±¡ï¼ŒåŒ…å«medicinesæ•°ç»„ } }`

5. **DELETE /api/prescriptions/:id** - åˆ é™¤å¤„æ–¹
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'åˆ é™¤æˆåŠŸ' }`

6. **GET /api/prescriptions/:id/export** - å¯¼å‡ºå¤„æ–¹
   - è¿”å›ï¼šæ–‡ä»¶æµï¼ˆblobï¼‰

---

### 4. ç”¨æˆ·æ•°æ®æ¨¡å— (user.js)
**æ–‡ä»¶ä½ç½®**: `czb/src/api/user.js`

#### éœ€è¦æ•°æ®åº“è¡¨ï¼š
- **user_favorites** - ç”¨æˆ·æ”¶è—è¡¨ï¼ˆå·²åœ¨è¯ææ¨¡å—åˆ—å‡ºï¼‰
- **learning_history** - å­¦ä¹ è®°å½•è¡¨
  - id
  - userId (å¤–é”®å…³è”users)
  - contentType (å†…å®¹ç±»å‹ï¼šmedicine/prescription)
  - contentId (å†…å®¹ID)
  - title (æ ‡é¢˜)
  - description (æè¿°)
  - createdAt

#### éœ€è¦APIæ¥å£ï¼š
1. **GET /api/user/favorites** - è·å–æ”¶è—åˆ—è¡¨
   - æŸ¥è¯¢å‚æ•°ï¼š
     - page (é¡µç )
     - pageSize (æ¯é¡µæ•°é‡)
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "list": [
           {
             "id": 1,
             "name": "äººå‚",
             "property": "ç”˜ã€å¾®è‹¦ï¼Œå¾®æ¸©",
             "efficacy": "å¤§è¡¥å…ƒæ°”...",
             "categoryName": "è¡¥è™šè¯",
             "favoriteTime": "2024-01-15"
           },
           ...
         ],
         "total": æ€»æ•°é‡
       }
     }
     ```

2. **POST /api/user/favorites** - æ·»åŠ æ”¶è—
   - è¯·æ±‚å‚æ•°ï¼š`{ medicineId: number }` æˆ– `{ prescriptionId: number }`
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'æ”¶è—æˆåŠŸ' }`

3. **DELETE /api/user/favorites/:id** - å–æ¶ˆæ”¶è—
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'å–æ¶ˆæ”¶è—æˆåŠŸ' }`

4. **GET /api/user/learning-history** - è·å–å­¦ä¹ è®°å½•
   - æŸ¥è¯¢å‚æ•°ï¼š
     - page (é¡µç )
     - pageSize (æ¯é¡µæ•°é‡)
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "list": [
           {
             "id": 1,
             "title": "æŸ¥çœ‹äº†äººå‚",
             "description": "å­¦ä¹ äº†äººå‚çš„åŠŸæ•ˆå’Œç”¨æ³•",
             "contentType": "medicine",
             "time": "2024-01-15 10:30:00"
           },
           ...
         ]
       }
     }
     ```

5. **POST /api/user/learning-history** - æ·»åŠ å­¦ä¹ è®°å½•
   - è¯·æ±‚å‚æ•°ï¼š
     ```json
     {
       "contentType": "medicine",
       "contentId": 1,
       "title": "æŸ¥çœ‹äº†äººå‚",
       "description": "å­¦ä¹ äº†äººå‚çš„åŠŸæ•ˆå’Œç”¨æ³•"
     }
     ```
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'è®°å½•æˆåŠŸ' }`

6. **GET /api/user/stats** - è·å–ç”¨æˆ·ç»Ÿè®¡
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "prescriptions": 8,
         "favorites": 23,
         "learningHours": 156
       }
     }
     ```

---

### 5. æ–‡ä»¶ä¸Šä¼ æ¨¡å— (upload.js)
**æ–‡ä»¶ä½ç½®**: `czb/src/api/upload.js`

#### éœ€è¦æ•°æ®åº“è¡¨ï¼š
- **user_files** - ç”¨æˆ·æ–‡ä»¶è¡¨
  - id
  - userId (å¤–é”®å…³è”users)
  - name (æ–‡ä»¶å)
  - url (æ–‡ä»¶URL)
  - size (æ–‡ä»¶å¤§å°ï¼Œå­—èŠ‚)
  - type (æ–‡ä»¶ç±»å‹)
  - uploadTime (ä¸Šä¼ æ—¶é—´)
  - createdAt

#### éœ€è¦APIæ¥å£ï¼š
1. **POST /api/files/upload** - ä¸Šä¼ æ–‡ä»¶
   - è¯·æ±‚ç±»å‹ï¼š`multipart/form-data`
   - è¯·æ±‚å‚æ•°ï¼š`file` (æ–‡ä»¶å¯¹è±¡)
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": {
         "id": 1,
         "name": "æ–‡ä»¶å.pdf",
         "url": "/files/xxx.pdf",
         "size": 1024,
         "uploadTime": "2024-01-15T10:30:00Z"
       },
       "message": "ä¸Šä¼ æˆåŠŸ"
     }
     ```

2. **GET /api/user/files** - è·å–æ–‡ä»¶åˆ—è¡¨
   - è¿”å›æ•°æ®ï¼š
     ```json
     {
       "code": 200,
       "data": [
         {
           "id": 1,
           "name": "æ–‡ä»¶1.pdf",
           "url": "/files/file1.pdf",
           "size": 2048,
           "uploadTime": "2024-01-15T10:30:00Z"
         },
         ...
       ]
     }
     ```

3. **DELETE /api/files/:id** - åˆ é™¤æ–‡ä»¶
   - è¿”å›æ•°æ®ï¼š`{ code: 200, message: 'åˆ é™¤æˆåŠŸ' }`

---

## ğŸ“¡ éœ€è¦APIæ¥å£çš„æ¨¡å—

### å½“å‰ä½¿ç”¨çœŸå®APIçš„æ¨¡å—ï¼š
1. **auth.js** - å·²ä½¿ç”¨çœŸå®APIï¼ˆ`request.post/get`ï¼‰
2. **upload.js** - å·²ä½¿ç”¨çœŸå®APIï¼ˆ`request.post/get/delete`ï¼‰

### å½“å‰ä½¿ç”¨Mockæ•°æ®çš„æ¨¡å—ï¼ˆéœ€è¦æ”¹ä¸ºçœŸå®APIï¼‰ï¼š
1. **medicine.js** - ä½¿ç”¨ `mockAPI.searchMedicines/getMedicineDetail/getCategories`
2. **prescription.js** - ä½¿ç”¨ `mockAPI.analyzeCompatibility/savePrescription/getPrescriptions`
3. **user.js** - ä½¿ç”¨å†…è”Promiseæ¨¡æ‹Ÿæ•°æ®

---

## ğŸ­ ä½¿ç”¨è™šæ‹Ÿæ•°æ®çš„åœ°æ–¹

### 1. Mockæ•°æ®æ–‡ä»¶
**ä½ç½®**: `czb/src/mock/index.js`

#### åŒ…å«çš„è™šæ‹Ÿæ•°æ®ï¼š
- **medicines** - 56ç§è¯æçš„å®Œæ•´æ•°æ®
  - åŒ…å«å­—æ®µï¼šid, name, latinName, category, property, meridian, efficacy, toxicity, suggestedDosage, maxDosage, dosage, favorite, flavor, usage_notes, contraindications, modernResearch

- **prescriptions** - 15ä¸ªæ–¹å‰‚çš„å®Œæ•´æ•°æ®
  - åŒ…å«å­—æ®µï¼šid, name, source, efficacy, mainDisease, description, compatibilityScore, medicinesæ•°ç»„, compatibilityFeatures, modernApplication, createdAt

- **categories** - 8ä¸ªåˆ†ç±»æ•°æ®
  - åŒ…å«å­—æ®µï¼šid, name, icon, count

- **properties** - 6ç§æ€§å‘³é€‰é¡¹
- **efficacies** - 10ç§åŠŸæ•ˆé€‰é¡¹

#### Mock APIå‡½æ•°ï¼š
- `mockAPI.searchMedicines(params)` - æœç´¢è¯æ
- `mockAPI.getMedicineDetail(id)` - è·å–è¯æè¯¦æƒ…
- `mockAPI.getCategories()` - è·å–åˆ†ç±»
- `mockAPI.getPrescriptions(params)` - è·å–æ–¹å‰‚åˆ—è¡¨
- `mockAPI.analyzeCompatibility(medicines)` - é…ä¼åˆ†æ
- `mockAPI.savePrescription(prescription)` - ä¿å­˜å¤„æ–¹

---

### 2. APIæ–‡ä»¶ä¸­çš„Mockå®ç°

#### `czb/src/api/medicine.js`
- âœ… ä½¿ç”¨ `mockAPI.searchMedicines()` - ç¬¬32è¡Œ
- âœ… ä½¿ç”¨ `mockAPI.getMedicineDetail()` - ç¬¬37è¡Œ
- âœ… ä½¿ç”¨ `mockAPI.getCategories()` - ç¬¬42è¡Œ
- âœ… å†…è”Promiseæ¨¡æ‹Ÿæ”¶è—åŠŸèƒ½ - ç¬¬46-54è¡Œ

#### `czb/src/api/prescription.js`
- âœ… ä½¿ç”¨ `mockAPI.analyzeCompatibility()` - ç¬¬30è¡Œ
- âœ… ä½¿ç”¨ `mockAPI.savePrescription()` - ç¬¬35è¡Œ
- âœ… ä½¿ç”¨ `mockAPI.getPrescriptions()` - ç¬¬40è¡Œ
- âœ… å†…è”Promiseæ¨¡æ‹Ÿè¯¦æƒ…/åˆ é™¤/å¯¼å‡º - ç¬¬44-80è¡Œ

#### `czb/src/api/user.js`
- âœ… å†…è”Promiseæ¨¡æ‹Ÿæ‰€æœ‰åŠŸèƒ½ - ç¬¬26-109è¡Œ
  - getFavorites
  - getLearningHistory
  - getStats
  - getInfo
  - addFavorite
  - removeFavorite

#### `czb/src/api/auth.js`
- âš ï¸ å½“å‰ä½¿ç”¨çœŸå®APIï¼Œä½†éœ€è¦ç¡®è®¤åç«¯å®ç°

#### `czb/src/api/upload.js`
- âš ï¸ å½“å‰ä½¿ç”¨çœŸå®APIï¼Œä½†éœ€è¦ç¡®è®¤åç«¯å®ç°

---

### 3. Mockè®¤è¯æ•°æ®
**ä½ç½®**: `czb/src/mock/auth.js`

#### è™šæ‹Ÿå®ç°ï¼š
- `authMockAPI.login(data)` - æ¨¡æ‹Ÿç™»å½•ï¼Œç”Ÿæˆmock token
- `authMockAPI.register(data)` - æ¨¡æ‹Ÿæ³¨å†Œ
- `authMockAPI.getUserInfo()` - ä»localStorageè¯»å–ç”¨æˆ·ä¿¡æ¯
- `authMockAPI.refreshToken()` - ç”Ÿæˆæ–°token
- `authMockAPI.logout()` - æ¸…é™¤localStorage

---

### 4. æœ¬åœ°å­˜å‚¨æ•°æ®
**ä½ç½®**: å¤šå¤„ä½¿ç”¨ `localStorage`

#### å­˜å‚¨çš„é”®åï¼š
- `user-token` - ç”¨æˆ·tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
- `user-info` - ç”¨æˆ·ä¿¡æ¯ï¼ˆJSONå­—ç¬¦ä¸²ï¼‰
  ```json
  {
    "id": 1,
    "username": "test",
    "name": "æµ‹è¯•ç”¨æˆ·",
    "role": "user",
    "avatar": ""
  }
  ```

#### ä½¿ç”¨ä½ç½®ï¼š
- `czb/src/store/index.js` - ç¬¬31-32è¡Œï¼Œç¬¬40-41è¡Œ
- `czb/src/router/index.js` - ç¬¬48è¡Œ
- `czb/src/components/Layout/AppSidebar.vue` - ç¬¬198è¡Œï¼Œç¬¬208è¡Œ
- `czb/src/components/Layout/AppHeader.vue` - ç¬¬215è¡Œï¼Œç¬¬225è¡Œ
- `czb/src/utils/auth.js` - ç¬¬5è¡Œï¼Œç¬¬10è¡Œï¼Œç¬¬15è¡Œï¼Œç¬¬20è¡Œ
- `czb/src/utils/request.js` - ç¬¬18è¡Œï¼Œç¬¬37è¡Œ

---

### 5. è§†å›¾ç»„ä»¶ä¸­çš„ç¡¬ç¼–ç æ•°æ®

#### `czb/src/views/Dashboard.vue`
- `userInfo` - ç”¨æˆ·ä¿¡æ¯ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬190-194è¡Œï¼‰
- `quickStats` - å¿«é€Ÿç»Ÿè®¡æ•°æ®ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬238-242è¡Œï¼‰
  - éœ€è¦APIï¼š`GET /api/user/stats`
- `quickActions` - å¿«æ·æ“ä½œåˆ—è¡¨ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬200-205è¡Œï¼‰
- `recentActivities` - æœ€è¿‘æ´»åŠ¨ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬279-285è¡Œï¼‰
  - éœ€è¦APIï¼š`GET /api/user/learning-history`ï¼ˆæœ€è¿‘è®°å½•ï¼‰
- `statsOverview` - æ•°æ®æ¦‚è§ˆï¼ˆç¡¬ç¼–ç ï¼Œç¬¬244-270è¡Œï¼‰
  - éœ€è¦APIï¼š`GET /api/user/stats`ï¼ˆè¯æåº“æ€»é‡ã€æ–¹å‰‚æ•°é‡ç­‰ï¼‰
- `compatibilityRecords` - é…ä¼è®°å½•ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬272-278è¡Œï¼‰
  - éœ€è¦APIï¼š`GET /api/prescriptions`ï¼ˆæœ€è¿‘å¤„æ–¹ï¼‰
- `systemStatus` - ç³»ç»ŸçŠ¶æ€ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬286-292è¡Œï¼‰
- `dailyTips` - ä»Šæ—¥æç¤ºï¼ˆç¡¬ç¼–ç ï¼Œç¬¬293-300è¡Œï¼‰

#### `czb/src/components/Layout/AppSidebar.vue`
- `messages` - æ¶ˆæ¯åˆ—è¡¨ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬186-190è¡Œï¼‰
  - éœ€è¦APIï¼š`GET /api/user/messages`ï¼ˆå¯é€‰ï¼Œå¦‚æœå®ç°æ¶ˆæ¯åŠŸèƒ½ï¼‰
- `messageCount` - æ¶ˆæ¯æ•°é‡ï¼ˆç¡¬ç¼–ç ï¼Œç¬¬185è¡Œï¼‰

#### `czb/src/views/Content.vue`
- `favorites` - æ”¶è—åˆ—è¡¨ï¼ˆç¬¬231-248è¡Œæœ‰ç¡¬ç¼–ç æ¨¡æ‹Ÿæ•°æ®ï¼‰
  - å®é™…ä½¿ç”¨ï¼š`userAPI.getFavorites()`ï¼ˆå·²ä½¿ç”¨mockï¼‰
- `learningHistory` - å­¦ä¹ è®°å½•
  - å®é™…ä½¿ç”¨ï¼š`userAPI.getLearningHistory()`ï¼ˆå·²ä½¿ç”¨mockï¼‰
- `userPrescriptions` - ç”¨æˆ·å¤„æ–¹åˆ—è¡¨
  - éœ€è¦APIï¼š`GET /api/prescriptions`ï¼ˆè·å–å½“å‰ç”¨æˆ·çš„å¤„æ–¹ï¼‰
- `uploadedFiles` - ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨
  - å®é™…ä½¿ç”¨ï¼š`uploadAPI.getFiles()`ï¼ˆå·²ä½¿ç”¨çœŸå®APIï¼‰
- `isTeacher` - æ˜¯å¦ä¸ºæ•™å¸ˆè§’è‰²ï¼ˆç¡¬ç¼–ç åˆ¤æ–­ï¼Œç¬¬224-226è¡Œï¼‰

#### `czb/src/views/Login.vue`
- âš ï¸ **é‡è¦**ï¼šè™½ç„¶ `auth.js` å·²é…ç½®çœŸå®APIï¼Œä½† `Login.vue` ä¸­**æœªå®é™…è°ƒç”¨**
- ç¬¬182-210è¡Œï¼š`handleLogin` å‡½æ•°ä½¿ç”¨ç¡¬ç¼–ç æ¨¡æ‹Ÿç™»å½•
  - ç›´æ¥åˆ›å»ºuserInfoå¯¹è±¡ï¼Œæœªè°ƒç”¨ `authAPI.login()`
  - éœ€è¦ä¿®æ”¹ä¸ºï¼š`const result = await authAPI.login(loginForm)`
- ç¬¬220-248è¡Œï¼š`handleGuestLogin` å‡½æ•°ä¹Ÿæ˜¯ç¡¬ç¼–ç 
- éœ€è¦å¯¹æ¥ï¼š`POST /api/auth/login` API

---

## ğŸ“Š æ•°æ®æ ¼å¼è§„èŒƒ

### ç»Ÿä¸€å“åº”æ ¼å¼
æ‰€æœ‰APIåº”è¿”å›ç»Ÿä¸€æ ¼å¼ï¼š
```json
{
  "code": 200,        // çŠ¶æ€ç ï¼š200æˆåŠŸï¼Œ400å‚æ•°é”™è¯¯ï¼Œ401æœªæˆæƒï¼Œ404æœªæ‰¾åˆ°ï¼Œ500æœåŠ¡å™¨é”™è¯¯
  "data": {},         // æ•°æ®å¯¹è±¡ï¼ˆæˆåŠŸæ—¶ï¼‰
  "message": "æç¤ºä¿¡æ¯" // æç¤ºä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
}
```

### é”™è¯¯å“åº”æ ¼å¼
```json
{
  "code": 400,
  "message": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

### åˆ†é¡µå“åº”æ ¼å¼
```json
{
  "code": 200,
  "data": {
    "list": [],           // æ•°æ®åˆ—è¡¨
    "total": 100,         // æ€»æ•°é‡
    "page": 1,            // å½“å‰é¡µ
    "pageSize": 12,       // æ¯é¡µæ•°é‡
    "totalPages": 9       // æ€»é¡µæ•°ï¼ˆå¯é€‰ï¼‰
  }
}
```

---

## ğŸ”„ åˆ‡æ¢Mockåˆ°çœŸå®APIçš„æ­¥éª¤

### 1. ä¿®æ”¹ `czb/src/api/medicine.js`
å°†ç¬¬26-55è¡Œçš„mockè°ƒç”¨æ”¹ä¸ºçœŸå®APIï¼š
```javascript
import request from '@/utils/request'

export const medicineAPI = {
    search: (params) => request.get('/api/medicines', { params }),
    getDetail: (id) => request.get(`/api/medicines/${id}`),
    getCategories: () => request.get('/api/medicine-categories'),
    toggleFavorite: (id) => request.post(`/api/medicines/${id}/favorite`)
}
```

### 2. ä¿®æ”¹ `czb/src/api/prescription.js`
å°†ç¬¬25-81è¡Œçš„mockè°ƒç”¨æ”¹ä¸ºçœŸå®APIï¼š
```javascript
import request from '@/utils/request'

export const prescriptionAPI = {
    analyze: (data) => request.post('/api/prescriptions/analyze', data),
    save: (data) => request.post('/api/prescriptions', data),
    getList: (params) => request.get('/api/prescriptions', { params }),
    getDetail: (id) => request.get(`/api/prescriptions/${id}`),
    delete: (id) => request.delete(`/api/prescriptions/${id}`),
    export: (id) => request.get(`/api/prescriptions/${id}/export`, {
        responseType: 'blob'
    })
}
```

### 3. ä¿®æ”¹ `czb/src/api/user.js`
å°†ç¬¬23-109è¡Œçš„mockå®ç°æ”¹ä¸ºçœŸå®APIï¼š
```javascript
import request from '@/utils/request'

export const userAPI = {
    getFavorites: (params) => request.get('/api/user/favorites', { params }),
    addFavorite: (data) => request.post('/api/user/favorites', data),
    removeFavorite: (id) => request.delete(`/api/user/favorites/${id}`),
    getLearningHistory: (params) => request.get('/api/user/learning-history', { params }),
    addLearningRecord: (data) => request.post('/api/user/learning-history', data),
    getStats: () => request.get('/api/user/stats'),
    getInfo: () => request.get('/api/user/info')
}
```

### 4. é…ç½®ç¯å¢ƒå˜é‡
åœ¨ `czb/vite.config.js` ä¸­è®¾ç½®ï¼š
```javascript
define: {
  'import.meta.env.VITE_USE_MOCK': JSON.stringify(false)
}
```

æˆ–åˆ›å»º `.env` æ–‡ä»¶ï¼š
```
VITE_USE_MOCK=false
VITE_API_BASE_URL=http://your-backend-url/api
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **Tokenè®¤è¯**ï¼šæ‰€æœ‰éœ€è¦è®¤è¯çš„APIéƒ½éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  `Authorization: Bearer {token}`
2. **é”™è¯¯å¤„ç†**ï¼šå‰ç«¯å·²å®ç°ç»Ÿä¸€çš„é”™è¯¯æ‹¦æˆªå™¨ï¼ˆ`czb/src/utils/request.js`ï¼‰
3. **æ•°æ®æ ¼å¼**ï¼šç¡®ä¿åç«¯è¿”å›çš„æ•°æ®æ ¼å¼ä¸mockæ•°æ®æ ¼å¼ä¸€è‡´
4. **åˆ†é¡µå‚æ•°**ï¼šç»Ÿä¸€ä½¿ç”¨ `page` å’Œ `pageSize` ä½œä¸ºåˆ†é¡µå‚æ•°
5. **æ—¶é—´æ ¼å¼**ï¼šå»ºè®®ä½¿ç”¨ ISO 8601 æ ¼å¼ï¼ˆå¦‚ï¼š2024-01-15T10:30:00Zï¼‰

---

## ğŸ“Œ æ€»ç»“

### éœ€è¦å®ç°çš„æ•°æ®åº“è¡¨ï¼ˆå…±8å¼ ï¼‰ï¼š
1. users - ç”¨æˆ·è¡¨
2. tokens - Tokenè¡¨ï¼ˆå¯é€‰ï¼‰
3. medicines - è¯æè¡¨
4. medicine_categories - è¯æåˆ†ç±»è¡¨
5. user_favorites - ç”¨æˆ·æ”¶è—è¡¨
6. prescriptions - æ–¹å‰‚è¡¨
7. prescription_medicines - æ–¹å‰‚è¯æå…³è”è¡¨
8. learning_history - å­¦ä¹ è®°å½•è¡¨
9. user_files - ç”¨æˆ·æ–‡ä»¶è¡¨

### éœ€è¦å®ç°çš„APIæ¥å£ï¼ˆå…±20ä¸ªï¼‰ï¼š
- è®¤è¯ç›¸å…³ï¼š5ä¸ª
- è¯æç›¸å…³ï¼š4ä¸ª
- æ–¹å‰‚ç›¸å…³ï¼š6ä¸ª
- ç”¨æˆ·ç›¸å…³ï¼š6ä¸ª
- æ–‡ä»¶ç›¸å…³ï¼š3ä¸ª

### ä½¿ç”¨Mockæ•°æ®çš„åœ°æ–¹ï¼š
- `czb/src/api/medicine.js` - å…¨éƒ¨ä½¿ç”¨mock
- `czb/src/api/prescription.js` - å…¨éƒ¨ä½¿ç”¨mock
- `czb/src/api/user.js` - å…¨éƒ¨ä½¿ç”¨mock
- `czb/src/mock/index.js` - Mockæ•°æ®æº
- `czb/src/mock/auth.js` - Mockè®¤è¯ï¼ˆä½†auth.jså·²ä½¿ç”¨çœŸå®APIï¼‰

