# 🎯【重要】服务器启动说明

## ✅ 我已经为您完成的工作

1. ✅ 修复了代码错误（express-request-id）
2. ✅ 启动了 MySQL 服务
3. ✅ 创建了数据库 tcm_platform
4. ✅ 运行了数据库迁移（创建了 8 个表）
5. ✅ 填充了测试数据（3个用户、10种药材、3个方剂）
6. ✅ 在新窗口启动了服务器

---

## 🚀 现在您需要做什么

### 查看服务器状态

**应该有一个新的 PowerShell 窗口自动打开**，显示服务器启动信息。

**如果看到以下内容表示成功**：
```
🚀 TCM Platform Backend Server
📍 Environment: development
🌐 Server: http://localhost:3000
💚 Health: http://localhost:3000/api/health

✨ Server started successfully!
```

---

## 📋 三种启动方式（任选其一）

### 方式 1：双击批处理文件（最简单）⭐

```
双击运行：D:\TCM web\启动服务器.bat
```

### 方式 2：使用 PowerShell 脚本

右键 `启动服务器.ps1` → "使用 PowerShell 运行"

### 方式 3：手动命令行

1. **重要**：打开新的命令提示符或 PowerShell
2. **重要**：切换到项目目录
   ```powershell
   cd "D:\TCM web"
   ```
3. 运行启动命令
   ```bash
   npm run dev
   ```

---

## ❌ 您之前遇到的错误原因

**问题**：在错误的目录下运行命令

```
❌ 错误：
C:\Users\25016> npm run dev
错误：找不到 package.json

✅ 正确：
D:\TCM web> npm run dev
成功启动！
```

**一定要先切换到项目目录 `D:\TCM web`！**

---

## 🧪 验证服务器是否成功启动

### 方法 1：浏览器（最简单）

打开浏览器，访问：
```
http://localhost:3000/api/health
```

应该看到：
```json
{
  "success": true,
  "data": {
    "status": "healthy",
    ...
  }
}
```

### 方法 2：PowerShell（新窗口）

打开**新的** PowerShell 窗口，运行：
```powershell
Invoke-RestMethod http://localhost:3000/api/health
```

---

## 🔧 如果服务器没有启动

### 检查 1：是否在正确的目录

```powershell
# PowerShell
Get-Location
# 应该显示：D:\TCM web

# CMD
cd
# 应该显示：D:\TCM web
```

### 检查 2：MySQL 是否运行

```powershell
Get-Service MySQL
# Status 应该是 Running
```

如果不是，以管理员身份运行：
```powershell
Start-Service MySQL
```

### 检查 3：端口 3000 是否被占用

```powershell
Get-NetTCPConnection -LocalPort 3000 -ErrorAction SilentlyContinue
```

如果被占用，修改 `.env` 文件：
```env
PORT=3001
```

### 检查 4：查看错误信息

如果启动失败，新窗口应该会显示错误信息。
常见错误：
- MySQL 连接失败 → 启动 MySQL 服务
- 端口被占用 → 更改端口或关闭占用进程
- 找不到模块 → 运行 `npm install`

---

## 📁 已创建的启动文件

| 文件 | 用途 | 使用方法 |
|------|------|----------|
| `启动服务器.bat` | Windows 批处理 | 双击运行 |
| `启动服务器.ps1` | PowerShell 脚本 | 右键→使用 PowerShell 运行 |
| `快速启动指南.md` | 详细说明 | 查看文档 |

---

## 🎯 最简单的启动方法

**只需两步**：

1. **双击** `D:\TCM web\启动服务器.bat`
2. **等待** 看到 "Server started successfully!"

**然后**：

3. 打开浏览器访问 http://localhost:3000/api/health

---

## 📊 项目配置信息

| 配置项 | 值 |
|--------|-----|
| 项目目录 | `D:\TCM web` |
| 服务器地址 | http://localhost:3000 |
| 健康检查 | http://localhost:3000/api/health |
| 数据库名 | tcm_platform |
| 数据库密码 | 159357 |
| JWT密钥 | 已自动生成 |

---

## 🧑‍💻 测试账号

| 用户名 | 密码 | 角色 |
|--------|------|------|
| health_user | password123 | 养生爱好者 |
| student_wang | password123 | 学生 |
| teacher_li | password123 | 教师 |

---

## 💡 常用命令

```bash
# 在项目目录下：
npm run dev           # 启动开发服务器
npm start             # 生产模式启动
npm run db:reset      # 重置数据库
Ctrl + C              # 停止服务器
```

---

## 📞 需要帮助？

参考其他文档：
- [快速启动指南.md](./快速启动指南.md) - 详细步骤
- [项目最终状态.md](./项目最终状态.md) - 完整状态
- [README.md](./README.md) - 项目文档

---

**记住最重要的一点**：

> 🎯 **所有 npm 命令必须在项目目录 `D:\TCM web\` 下运行！**

---

**祝您开发顺利！** 🚀

