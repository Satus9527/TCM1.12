# 🎨 前端验收文档 - TCM Platform

**项目**: 中医药方平台前端  
**验收日期**: ___________  
**前端负责人**: ___________  
**验收负责人**: ___________  

---

## 📋 目录

1. [验收前检查](#1-验收前检查)
2. [必须提交的内容](#2-必须提交的内容)
3. [功能验收标准](#3-功能验收标准)
4. [质量要求](#4-质量要求)
5. [部署要求](#5-部署要求)
6. [验收流程](#6-验收流程)

---

## 1. 验收前检查

### ✅ 基础准备

在开始验收前，确认以下条件：

- [ ] 前端项目可在本地运行（`npm run dev`）
- [ ] 前端项目可成功构建（`npm run build`）
- [ ] 已阅读后端API文档
- [ ] 已测试后端API连通性
- [ ] 使用最新后端API版本

---

## 2. 必须提交的内容

### 📦 2.1 代码仓库

**必须**: Git仓库（GitHub / GitLab / 内部Git）

**要求**:
- [ ] 完整的源代码
- [ ] 提交历史清晰
- [ ] README.md 完整
- [ ] `.gitignore` 配置正确

**仓库应包含**:
```
frontend/
├── src/                    # 源代码
│   ├── components/        # 组件
│   ├── views/            # 页面
│   ├── router/           # 路由
│   ├── store/            # 状态管理
│   ├── api/              # API调用
│   ├── utils/            # 工具函数
│   └── App.vue           # 根组件
├── public/               # 静态资源
├── package.json          # 依赖配置
├── .env.example          # 环境变量示例
├── README.md             # 项目说明
├── .gitignore           # Git忽略
└── vite.config.js       # 构建配置（如使用Vite）
```

---

### 📄 2.2 项目文档

#### 必须提供的文档：

**1. README.md（必须）**
- [ ] 项目介绍
- [ ] 技术栈说明
- [ ] 安装步骤
- [ ] 运行命令
- [ ] 环境变量配置
- [ ] 目录结构说明

**2. API对接文档（必须）**
- [ ] 使用的后端API列表
- [ ] 认证方式说明
- [ ] 错误处理规范
- [ ] 数据结构说明

**3. 部署文档（必须）**
- [ ] 构建命令
- [ ] 构建产物位置
- [ ] 部署步骤
- [ ] Nginx配置（如需要）

**示例**:
```markdown
# README.md 最低要求

## 快速开始

### 安装依赖
\`\`\`bash
npm install
\`\`\`

### 配置环境变量
\`\`\`bash
cp .env.example .env
# 编辑 .env 文件，填入后端API地址
\`\`\`

### 运行开发服务器
\`\`\`bash
npm run dev
\`\`\`

### 构建生产版本
\`\`\`bash
npm run build
# 构建产物在 dist/ 目录
\`\`\`

## 环境变量

VITE_API_BASE_URL=http://localhost:3000/api
```

---

### 🖼️ 2.3 演示材料

#### 必须提供：

**1. 功能演示视频或截图**
- [ ] 每个核心功能的演示
- [ ] 关键交互流程记录
- [ ] 响应式设计演示

**2. 浏览器兼容性报告**
- [ ] Chrome 最新版
- [ ] Firefox 最新版
- [ ] Safari 最新版
- [ ] Edge 最新版

---

## 3. 功能验收标准

### 🎯 3.1 核心功能验收（必须全部通过）

#### 功能模块清单：

---

#### ✅ F1: 用户认证模块

**必需功能**:
- [ ] **F1.1** 用户登录
  - [ ] 登录表单验证
  - [ ] 错误提示
  - [ ] 登录成功后跳转
  - [ ] Token自动存储
- [ ] **F1.2** 用户注册
  - [ ] 注册表单验证
  - [ ] 密码强度检查
  - [ ] 重复用户名检查
- [ ] **F1.3** 用户登出
  - [ ] 清除Token
  - [ ] 跳转到登录页
- [ ] **F1.4** Token刷新
  - [ ] 自动刷新过期Token
  - [ ] 刷新失败时跳转登录

**API要求**:
```javascript
POST /api/auth/login      // 登录
POST /api/auth/register   // 注册
POST /api/auth/logout     // 登出
POST /api/auth/refresh    // 刷新Token
```

---

#### ✅ F2: 知识库模块

**必需功能**:
- [ ] **F2.1** 药材列表
  - [ ] 分页显示
  - [ ] 搜索功能
  - [ ] 筛选功能
  - [ ] 加载状态
- [ ] **F2.2** 药材详情
  - [ ] 基本信息展示
  - [ ] 性味归经
  - [ ] 功效主治
  - [ ] 注意事项
- [ ] **F2.3** 方剂列表
  - [ ] 分页显示
  - [ ] 搜索功能
  - [ ] 筛选功能
  - [ ] 加载状态
- [ ] **F2.4** 方剂详情
  - [ ] 基本信息展示
  - [ ] 组成列表
  - [ ] 功效主治
  - [ ] 加减方

**API要求**:
```javascript
GET  /api/medicines          // 药材列表
GET  /api/medicines/:id      // 药材详情
GET  /api/formulas           // 方剂列表
GET  /api/formulas/:id       // 方剂详情
```

**验收标准**:
- 响应式布局，适配手机/平板/PC
- 加载时间 < 2秒
- 分页流畅，无明显卡顿

---

#### ✅ F3: AI推荐模块

**必需功能**:
- [ ] **F3.1** 症状输入
  - [ ] 症状选择器
  - [ ] 自由文本输入
  - [ ] 舌象描述
- [ ] **F3.2** 方剂推荐
  - [ ] 提交推荐请求
  - [ ] 显示加载状态
  - [ ] 展示推荐结果
  - [ ] 显示推荐理由
- [ ] **F3.3** 错误处理
  - [ ] AI服务不可用提示
  - [ ] 网络错误提示
  - [ ] 超时提示

**API要求**:
```javascript
POST /api/recommend/formula  // 方剂推荐
```

**验收标准**:
- 推荐响应时间 < 5秒
- 降级方案正常显示
- 用户友好的错误提示

---

#### ✅ F4: 个性化内容模块

**必需功能**:
- [ ] **F4.1** 我的收藏
  - [ ] 收藏列表展示
  - [ ] 收藏/取消收藏
  - [ ] 收藏列表分页
- [ ] **F4.2** 我的模拟
  - [ ] 模拟方案列表
  - [ ] 创建新方案
  - [ ] 删除方案
  - [ ] 查看方案详情

**API要求**:
```javascript
GET    /api/collections          // 收藏列表
POST   /api/collections          // 添加收藏
DELETE /api/collections/:id      // 删除收藏
GET    /api/simulations          // 模拟列表
POST   /api/simulations          // 创建模拟
DELETE /api/simulations/:id      // 删除模拟
```

**验收标准**:
- 操作反馈即时
- 删除需要确认
- 列表加载流畅

---

#### ✅ F5: 实时模拟模块

**必需功能**:
- [ ] **F5.1** WebSocket连接
  - [ ] 自动连接
  - [ ] 重连机制
  - [ ] 连接状态显示
- [ ] **F5.2** 实时同步
  - [ ] 配方实时更新
  - [ ] AI分析结果实时显示
  - [ ] 安全校验反馈
- [ ] **F5.3** 交互功能
  - [ ] 添加药材
  - [ ] 删除药材
  - [ ] 调整剂量
  - [ ] 实时预览

**API要求**:
```javascript
WebSocket /api/simulation      // WebSocket连接
POST      /api/tickets         // 获取WebSocket票据
```

**验收标准**:
- 连接稳定性 > 95%
- 延迟 < 100ms
- 断线重连成功

---

#### ⚠️ F6: 文件管理模块（可选）

**如果实现，需要包含**:
- [ ] **F6.1** 文件上传
  - [ ] 文件选择
  - [ ] 上传进度
  - [ ] 上传完成提示
- [ ] **F6.2** 文件列表
  - [ ] 文件列表展示
  - [ ] 预览功能
  - [ ] 下载功能
- [ ] **F6.3** 文件删除
  - [ ] 删除确认
  - [ ] 删除状态反馈

**API要求**:
```javascript
POST   /api/files     // 上传文件
GET    /api/files     // 文件列表
DELETE /api/files/:id // 删除文件
```

---

### 🎨 3.2 UI/UX验收标准

#### 设计规范：
- [ ] 整体风格统一
- [ ] 色彩搭配合理
- [ ] 字体大小适中
- [ ] 图标使用恰当

#### 响应式设计：
- [ ] **移动端** (< 768px)
  - [ ] 布局适配
  - [ ] 按钮大小合适
  - [ ] 文字可读
- [ ] **平板** (768px - 1024px)
  - [ ] 布局优化
  - [ ] 间距合理
- [ ] **桌面** (> 1024px)
  - [ ] 充分利用空间
  - [ ] 多列布局

#### 交互体验：
- [ ] 按钮点击反馈
- [ ] 表单验证实时
- [ ] 加载状态明确
- [ ] 错误提示友好
- [ ] 操作确认机制

---

### 🔒 3.3 安全验收

**安全检查清单**:
- [ ] Token安全存储（localStorage/sessionStorage）
- [ ] 敏感信息不暴露（控制台不输出Token）
- [ ] XSS防护（输入验证、输出转义）
- [ ] CSRF防护（Token验证）
- [ ] HTTPS强制（生产环境）
- [ ] 密码不显示（type="password"）

---

## 4. 质量要求

### 🎯 4.1 代码质量

**Lint检查**:
- [ ] ESLint / TSLint 无错误
- [ ] 无运行时警告
- [ ] 控制台无Error

**代码规范**:
- [ ] 代码格式统一
- [ ] 命名规范清晰
- [ ] 注释充分
- [ ] 组件拆分合理

**测试**:
- [ ] 关键功能有测试（单元测试/集成测试）
- [ ] 测试覆盖率 > 60%（推荐）

---

### ⚡ 4.2 性能要求

**性能指标**:
- [ ] 首屏加载 < 3秒
- [ ] 页面切换 < 1秒
- [ ] API响应 < 2秒
- [ ] 构建产物 < 2MB（gzip）

**优化措施**:
- [ ] 代码分割（Code Splitting）
- [ ] 懒加载（Lazy Loading）
- [ ] 图片优化
- [ ] 缓存策略

---

### 🐛 4.3 Bug验收

**Bug分级**:
- **P0（致命）**: 导致系统无法使用
  - [ ] 无P0 bug
- **P1（严重）**: 核心功能不可用
  - [ ] 无P1 bug
- **P2（一般）**: 功能不完整或有明显问题
  - [ ] P2 bug < 5个
- **P3（轻微）**: 不影响使用的小问题
  - [ ] P3 bug < 10个

---

## 5. 部署要求

### 🚀 5.1 构建配置

**必须提供**:
- [ ] `package.json` 包含 build 脚本
- [ ] 构建命令清晰（如：`npm run build`）
- [ ] 构建产物单一目录（如：`dist/`）
- [ ] 环境变量配置示例

**构建要求**:
```json
{
  "scripts": {
    "dev": "vite",          // 开发服务器
    "build": "vite build",  // 生产构建
    "preview": "vite preview" // 预览构建结果
  }
}
```

---

### 🌐 5.2 Nginx配置

**必须提供Nginx配置示例**:

```nginx
server {
    listen 80;
    server_name yourdomain.com;
    
    # 前端静态文件
    root /var/www/tcm_frontend;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;  # SPA路由支持
    }
    
    # API代理到后端
    location /api {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
    
    # WebSocket代理
    location /api/simulation {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }
}
```

---

### 📦 5.3 部署清单

**部署前检查**:
- [ ] 环境变量已配置
- [ ] 构建产物已生成
- [ ] 静态资源路径正确
- [ ] API地址配置正确
- [ ] WebSocket地址配置正确

**部署后验证**:
- [ ] 首页可访问
- [ ] 登录功能正常
- [ ] API调用成功
- [ ] WebSocket连接成功
- [ ] 无404错误（SPA路由）

---

## 6. 验收流程

### 📅 6.1 验收时间表

```
第1天: 代码审查
  ├─ 上午: 仓库提交检查
  ├─ 下午: 代码规范检查
  └─ 晚上: 文档审查

第2天: 功能验收
  ├─ 上午: 核心功能测试
  ├─ 下午: UI/UX验收
  └─ 晚上: 性能测试

第3天: 集成验收
  ├─ 上午: 部署测试
  ├─ 下午: 安全验收
  └─ 晚上: Bug修复确认

第4天: 最终验收
  ├─ 上午: 综合测试
  ├─ 下午: 验收会议
  └─ 验收结果确认
```

---

### ✅ 6.2 验收标准

#### 验收通过条件（全部满足）：

1. **功能完整性**: ✅
   - 核心功能（F1-F5）全部实现
   - 无P0/P1 bug
   - 所有必需API已对接

2. **代码质量**: ✅
   - Lint无错误
   - 代码规范统一
   - 文档完整

3. **用户体验**: ✅
   - 响应式设计良好
   - 交互流畅
   - 错误提示友好

4. **性能要求**: ✅
   - 加载速度达标
   - 无明显卡顿
   - 构建产物合理

5. **安全要求**: ✅
   - 敏感信息保护
   - 输入验证充分
   - 无安全漏洞

6. **部署就绪**: ✅
   - 构建配置正确
   - 部署文档完整
   - 环境配置清晰

---

### 📝 6.3 验收报告

**验收报告模板**:

```markdown
# 前端验收报告

## 基本信息
- 项目: TCM Platform Frontend
- 验收日期: 2025-XX-XX
- 前端负责人: XXX
- 验收负责人: XXX

## 验收结果

### 1. 代码提交 ✅/❌
- 仓库链接: __________
- 代码完整性: ✅
- 提交历史: ✅

### 2. 文档完整性 ✅/❌
- README.md: ✅
- API对接文档: ✅
- 部署文档: ✅

### 3. 功能验收 ✅/❌
- F1 用户认证: ✅
- F2 知识库: ✅
- F3 AI推荐: ✅
- F4 个性化: ✅
- F5 实时模拟: ✅
- F6 文件管理: ⚠️ 未实现

### 4. UI/UX ✅/❌
- 设计规范: ✅
- 响应式设计: ✅
- 交互体验: ✅

### 5. 代码质量 ✅/❌
- Lint检查: ✅
- 代码规范: ✅
- 注释充分: ✅

### 6. 性能指标 ✅/❌
- 首屏加载: 2.1s ✅
- 页面切换: 0.8s ✅
- 构建产物: 1.5MB ✅

### 7. 安全要求 ✅/❌
- Token安全: ✅
- XSS防护: ✅
- 输入验证: ✅

### 8. 部署就绪 ✅/❌
- 构建配置: ✅
- 环境配置: ✅
- Nginx配置: ✅

## 发现的问题

### P0 Bug
(无)

### P1 Bug
(无)

### P2 Bug
1. 药材详情页图片加载失败

### P3 Bug
1. 列表页加载动画稍慢
2. 错误提示文案可优化

## 改进建议

1. 增加单元测试覆盖率
2. 优化图片加载策略
3. 完善错误处理

## 最终结论

✅ **验收通过**

整体质量: ⭐⭐⭐⭐（4/5）

建议: 修复P2和P3问题后可部署到生产环境
```

---

## 7. 常见问题（FAQ）

### Q1: 如果某个功能未完成怎么办？

**A**: 
- 核心功能（F1-F5）必须完成，否则不通过
- 可选功能（F6）可留空白或Mock数据
- 必须在文档中说明未完成的原因和计划

---

### Q2: 如何测试WebSocket功能？

**A**:
1. 确保后端WebSocket服务运行
2. 获取WebSocket票据（POST /api/tickets）
3. 连接WebSocket（ws://localhost:3000/api/simulation）
4. 测试实时同步功能

---

### Q3: 环境变量如何配置？

**A**:
提供 `.env.example` 文件：
```env
# 后端API地址
VITE_API_BASE_URL=http://localhost:3000/api

# WebSocket地址
VITE_WS_BASE_URL=ws://localhost:3000
```

开发环境使用 `VITE_API_BASE_URL=http://localhost:3000/api`  
生产环境使用 `VITE_API_BASE_URL=https://yourdomain.com/api`

---

### Q4: 验收不通过怎么办？

**A**:
1. 列出所有未通过项
2. 给出明确的修复建议
3. 约定复验收时间（通常1-3天）
4. 复验收时只检查修复项

---

### Q5: 构建产物在哪里？

**A**:
- Vite: `dist/`
- Vue CLI: `dist/`
- React: `build/`
- Angular: `dist/`

请统一输出到 `dist/` 目录

---

## 8. 附录

### 📚 8.1 后端API文档

详见项目根目录下的API文档：
- `API文档.md` 或
- Postman Collection

### 🔗 8.2 参考资源

- [Vue.js 官方文档](https://vuejs.org/)
- [Element Plus 文档](https://element-plus.org/)
- [Vite 文档](https://vitejs.dev/)
- [WebSocket API](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)

---

## ✅ 验收确认

**前端负责人签字**: ___________ 日期: ___________  
**验收负责人签字**: ___________ 日期: ___________  

---

**文档版本**: v1.0  
**最后更新**: 2025年11月2日  

