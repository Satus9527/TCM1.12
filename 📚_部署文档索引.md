# 📚 TCM Platform 部署文档索引

**快速导航**: 本文档集中整理了所有部署相关的文档和资源。

---

## 📖 主要文档

### 1. 🚀 生产部署指南（完整版）

**文件**: `🚀_生产部署指南_无Docker版.md`

**内容**: 
- ✅ 完整的五阶段部署流程
- ✅ 详细的命令和配置
- ✅ 安全配置建议
- ✅ 故障排除指南

**适用场景**: 首次在服务器上部署，需要详细步骤指导

---

### 2. 📖 部署快速参考

**文件**: `📖_部署快速参考.md`

**内容**:
- ✅ 核心命令速查表
- ✅ 常用检查命令
- ✅ 故障排除表格
- ✅ 备份和维护命令

**适用场景**: 已经熟悉流程，需要快速查阅命令

---

## 🔧 配置文件

### 1. PM2 生态系统配置

**文件**: `ecosystem.config.js`

**用途**: PM2 进程管理配置

**使用**: 生产环境自动加载，无需手动修改

---

### 2. Nginx 配置模板

**文件**: `nginx-tcm-platform.conf`

**用途**: Nginx 反向代理配置

**使用方法**:
```bash
# 复制到服务器
sudo cp nginx-tcm-platform.conf /etc/nginx/sites-available/tcm_platform

# 启用配置
sudo ln -s /etc/nginx/sites-available/tcm_platform /etc/nginx/sites-enabled/

# 测试并重载
sudo nginx -t
sudo systemctl reload nginx
```

---

### 3. 部署脚本

**文件**: `deploy.sh`

**用途**: 自动化更新代码和重启服务

**使用方法**:
```bash
# 添加执行权限
chmod +x deploy.sh

# 执行部署
./deploy.sh
```

---

## 📦 Docker 相关（可选）

### Docker 使用情况

**文件**: `📦_Docker使用情况报告.md`、`Docker使用情况简要总结.md`

**内容**: 
- 项目是否使用 Docker
- MinIO 的 Docker 部署建议
- 未来容器化建议

**结论**: 当前项目不使用 Docker，生产部署为直接运行方式

---

## 📋 项目文档

### 1. 项目概述

**文件**: `README.md`

**内容**: 
- 项目简介和技术栈
- 项目结构
- 快速开始指南

---

### 2. 快速开始

**文件**: `QUICKSTART.md`

**内容**: 
- 5分钟快速启动指南
- 开发环境配置
- 测试账号

**适用场景**: 本地开发和测试

---

### 3. 完整自测指南

**文件**: `完整自测指南.md`

**内容**:
- 所有功能的测试步骤
- 自动化测试脚本使用
- 测试结果解读

**适用场景**: 部署后验证功能完整性

---

### 4. 项目状态

**文件**: `PROJECT_STATUS.md`

**内容**:
- 已完成功能清单
- 技术架构说明
- 已知问题和后续计划

---

## 🎯 部署流程总览

### 阶段1: 准备
1. 阅读 `🚀_生产部署指南_无Docker版.md` 的"阶段一"
2. 安装服务器基础环境
3. 配置 Node.js、MySQL、Redis

### 阶段2: 数据库和防火墙
1. 阅读部署指南的"阶段二"
2. 创建数据库和用户
3. 配置防火墙

### 阶段3: 部署代码
1. 克隆代码到服务器
2. 运行数据库迁移
3. 配置 `.env` 文件

### 阶段4: Nginx 和启动
1. 配置 Nginx（使用 `nginx-tcm-platform.conf`）
2. 获取 SSL 证书
3. 启动服务

### 阶段5: 验证
1. 健康检查
2. 运行 `完整自测指南.md` 中的测试
3. 检查日志

---

## 🔍 快速查找

| 需要... | 查看文档 |
|--------|---------|
| 完整部署步骤 | `🚀_生产部署指南_无Docker版.md` |
| 快速命令 | `📖_部署快速参考.md` |
| Nginx 配置 | `nginx-tcm-platform.conf` |
| PM2 配置 | `ecosystem.config.js` |
| 本地开发 | `QUICKSTART.md` |
| 功能测试 | `完整自测指南.md` |
| Docker 说明 | `📦_Docker使用情况报告.md` |
| 项目概览 | `README.md` |

---

## 📞 支持资源

### 常见问题

**数据库连接失败**:
- 检查 `.env` 中的 `DB_*` 配置
- 验证 MySQL 用户权限
- 查看应用日志: `pm2 logs tcm-backend`

**Nginx 502 错误**:
- 检查后端是否运行: `pm2 status`
- 查看 Nginx 错误日志: `sudo tail -f /var/log/nginx/tcm_platform_error.log`

**WebSocket 连接失败**:
- 检查 Nginx 配置中的 `/api/simulation` 位置
- 验证后端 WebSocket 路径: `ws://localhost:3000/api/simulation`
- 检查防火墙规则

---

## 📝 配置检查清单

部署前必须检查:

- [ ] 服务器已安装 Node.js v18.x
- [ ] MySQL 已配置并创建数据库
- [ ] Redis 已安装并运行
- [ ] Nginx 已安装
- [ ] 防火墙已配置（仅开放 22, 80, 443）
- [ ] `.env` 文件已正确配置
- [ ] JWT_SECRET 已生成随机字符串
- [ ] 数据库密码足够强
- [ ] SSL 证书已配置
- [ ] PM2 已安装并配置开机自启
- [ ] 所有服务已启动
- [ ] 健康检查返回正常

---

## 🎉 完成标志

部署成功的标志:

✅ **HTTP 重定向到 HTTPS**  
✅ **健康检查端点返回正常**  
✅ **API 端点返回有效响应**  
✅ **WebSocket 连接成功**  
✅ **PM2 显示进程在线**  
✅ **日志无错误信息**  
✅ **所有测试通过**

---

### 8. 部署完成总结

**文件**: `🎉_部署文档完成总结.md`

**内容**:
- ✅ 所有部署文档的汇总
- ✅ 完整性和质量评估
- ✅ 使用和维护指南
- ✅ 交付清单

**作用**: 确认所有部署资源都已就绪

---

## 📦 新创建的文件

### 本次创建的部署文件

1. ✅ `🚀_生产部署指南_无Docker版.md` - 完整部署指南
2. ✅ `📖_部署快速参考.md` - 快速命令参考
3. ✅ `📚_部署文档索引.md` - 本文档
4. ✅ `ecosystem.config.js` - PM2 配置
5. ✅ `nginx-tcm-platform.conf` - Nginx 配置模板
6. ✅ `deploy.sh` - 部署自动化脚本
7. ✅ `🎉_部署文档完成总结.md` - 完成总结

---

**最后更新**: 2025年11月2日  
**文档版本**: 1.0.0  
**维护者**: TCM Platform Team

